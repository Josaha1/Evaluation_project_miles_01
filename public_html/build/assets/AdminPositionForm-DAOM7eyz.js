import{K as E,r as b,m as M,j as t}from"./app-CvBoKgfj.js";import{M as _,B,t as d}from"./MainLayout-DXHIoJI3.js";import{B as D}from"./breadcrumb-BC5CAiAz.js";import{S as L}from"./react-select.esm-BSHX6GPi.js";import{L as x}from"./label-CSBkD6Sn.js";import{I as O}from"./input-CLa8Wrjy.js";import{C as w}from"./card-CwtR2BCI.js";import"./utils-ONoQxm8A.js";import"./createLucideIcon-DRc0qRU9.js";import"./x-CCAKE15G.js";const h=()=>document.documentElement.classList.contains("dark");function W(){var f;const{mode:o,position:s,departments:l}=E().props,[r,g]=b.useState(h()),{data:c,setData:m,post:j,put:v,processing:y,errors:n}=M({title:(s==null?void 0:s.title)||"",department_id:((f=s==null?void 0:s.department_id)==null?void 0:f.toString())||""});b.useEffect(()=>{const e=new MutationObserver(()=>g(h()));return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[]);const S=e=>({...e,colors:{...e.colors,primary:"#6366f1",primary25:"#e0e7ff",neutral0:r?"#1f2937":"#fff",neutral5:r?"#374151":"#f3f4f6",neutral10:r?"#4b5563":"#e5e7eb",neutral20:r?"#6b7280":"#d1d5db",neutral30:"#9ca3af",neutral80:r?"#f9fafb":"#111827"}}),k={control:e=>({...e,backgroundColor:r?"#1f2937":"#fff",borderColor:r?"#4b5563":"#d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}),menu:e=>({...e,backgroundColor:r?"#1f2937":"#fff",borderRadius:"0.5rem"}),singleValue:e=>({...e,color:r?"#f9fafb":"#111827"}),option:(e,a)=>({...e,backgroundColor:a.isSelected?"#6366f1":a.isFocused?r?"#374151":"#f3f4f6":"transparent",color:a.isSelected?"#fff":r?"#f9fafb":"#111827"}),group:e=>({...e,paddingTop:0,paddingBottom:0}),groupHeading:e=>({...e,color:r?"#9ca3af":"#6b7280",fontWeight:600,fontSize:"0.75rem",textTransform:"none"})},u=[],i={};l.forEach(e=>{var p;const a=((p=e.division)==null?void 0:p.name)||"ไม่ระบุสายงาน";i[a]||(i[a]=[]),i[a].push({value:e.id.toString(),label:e.name})}),Object.entries(i).forEach(([e,a])=>{u.push({label:e,options:a})});const N=l.map(e=>({value:e.id.toString(),label:e.name})),C=e=>{e.preventDefault(),o==="edit"&&s?v(route("admin.positions.update",{position:s.id}),{onSuccess:()=>d.success("แก้ไขตำแหน่งเรียบร้อยแล้ว"),onError:()=>d.error("ไม่สามารถบันทึกได้")}):j(route("admin.positions.store"),{onSuccess:()=>d.success("เพิ่มตำแหน่งเรียบร้อยแล้ว"),onError:()=>d.error("ไม่สามารถบันทึกได้")})};return t.jsx(_,{title:o==="edit"?"แก้ไขตำแหน่ง":"เพิ่มตำแหน่ง",breadcrumb:t.jsx(D,{items:[{label:"แดชบอร์ดผู้ดูแลระบบ",href:route("admindashboard")},{label:"จัดการตำแหน่ง",href:route("admin.positions.index")},{label:o==="edit"?"แก้ไข":"เพิ่มใหม่",active:!0}]}),children:t.jsx("div",{className:"max-w-2xl mx-auto px-6 py-10",children:t.jsxs(w,{className:"p-8 space-y-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-indigo-600",children:o==="edit"?"แก้ไขตำแหน่ง":"เพิ่มตำแหน่งใหม่"}),t.jsxs("form",{onSubmit:C,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx(x,{children:"ชื่อตำแหน่ง"}),t.jsx(O,{value:c.title,onChange:e=>m("title",e.target.value),placeholder:"กรอกชื่อตำแหน่ง",className:"dark:bg-gray-800 dark:text-white"}),n.title&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.title})]}),t.jsxs("div",{children:[t.jsx(x,{children:"หน่วยงาน (Department)"}),t.jsx(L,{options:u,value:N.find(e=>e.value===c.department_id)||null,onChange:e=>m("department_id",(e==null?void 0:e.value)||""),isClearable:!0,placeholder:"เลือกหน่วยงาน...",theme:S,styles:k}),n.department_id&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.department_id})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("a",{href:route("admin.positions.index"),className:"px-4 py-2 border rounded text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:"ยกเลิก"}),t.jsx(B,{type:"submit",disabled:y,children:o==="edit"?"บันทึกการแก้ไข":"บันทึก"})]})]})]})})})}export{W as default};
