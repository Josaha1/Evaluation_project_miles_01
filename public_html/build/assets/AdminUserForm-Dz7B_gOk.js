import{K as ae,r as d,m as te,j as s,S as v}from"./app-CvBoKgfj.js";import{M as re,B as ne,t as p}from"./MainLayout-DXHIoJI3.js";import{B as ie}from"./breadcrumb-BC5CAiAz.js";import{S as j}from"./react-select.esm-BSHX6GPi.js";import{C as f,L as le}from"./react-select-creatable.esm-CxnVDAN5.js";import{L as i}from"./label-CSBkD6Sn.js";import{I as g}from"./input-CLa8Wrjy.js";import{C as oe}from"./card-CwtR2BCI.js";import{E as de}from"./eye-off-9JqVlv9A.js";import{E as ce}from"./eye-CNMKZgja.js";import{C as ue}from"./circle-alert-BO7xtVMv.js";import"./utils-ONoQxm8A.js";import"./createLucideIcon-DRc0qRU9.js";import"./x-CCAKE15G.js";const F=()=>document.documentElement.classList.contains("dark");function Oe(){const{divisions:L,departments:z,factions:A,position:q,mode:c,user:a}=ae().props,[me,R]=d.useState(""),[he,T]=d.useState(""),[xe,Y]=d.useState(F()),[C,w]=d.useState(!1),[y,G]=d.useState(!1),{data:t,setData:r,post:U,put:K,processing:V,errors:S,reset:H}=te({emid:(a==null?void 0:a.emid)||"",prename:(a==null?void 0:a.prename)||"",fname:(a==null?void 0:a.fname)||"",lname:(a==null?void 0:a.lname)||"",sex:(a==null?void 0:a.sex)||"",division_id:(a==null?void 0:a.division_id)||"",department_id:(a==null?void 0:a.department_id)||"",faction_id:(a==null?void 0:a.faction_id)||"",position_id:(a==null?void 0:a.position_id)||"",grade:(a==null?void 0:a.grade)||"",birthdate:(a==null?void 0:a.birthdate)||"",password:"",role:(a==null?void 0:a.role)||"user",user_type:(a==null?void 0:a.user_type)||"internal"}),J=e=>{e.preventDefault();const n=c==="edit"?K:U,l=c==="edit"?route("admin.users.update",a.emid):route("admin.users.store");n(l,{onSuccess:()=>{p.success(c==="edit"?"‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß":"‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß"),H("password"),w(!1)},onError:()=>p.error("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ")})},Q=e=>{v.post(route("admin.departments.quick-store"),{name:e,division_id:t.division_id},{onSuccess:()=>{p.success("‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß"),v.reload({only:["departments"]})},onError:()=>p.error("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ")})},W=e=>{v.post(route("admin.factions.quick-store"),{name:e},{onSuccess:()=>{p.success("‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ù‡πà‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß"),v.reload({only:["factions"]})},onError:()=>p.error("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ù‡πà‡∏≤‡∏¢‡πÑ‡∏î‡πâ")})},X=e=>{v.post(route("admin.positions.quick-store"),{title:e},{onSuccess:()=>{p.success("‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß"),v.reload({only:["position"]})},onError:()=>p.error("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ")})},b=(e,n="name")=>e.map(l=>({value:l.id.toString(),label:l[n]})),k=b(L||[]),_=b(z||[]),N=b(A||[]),E=b(q||[],"title");d.useEffect(()=>{const e=new MutationObserver(()=>{Y(F())});return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[]);const o=e=>({...e,colors:{...e.colors,primary:"#6366f1",primary25:"#e0e7ff",neutral0:"#fff",neutral5:"#f3f4f6",neutral10:"#e5e7eb",neutral20:"#d1d5db",neutral30:"#9ca3af",neutral80:"#111827"}}),u={control:e=>({...e,backgroundColor:"#fff",borderColor:"#d1d5db",borderRadius:"0.5rem",paddingLeft:"0.25rem",paddingRight:"0.25rem",fontSize:"0.875rem"}),menu:e=>({...e,backgroundColor:"#fff",borderRadius:"0.5rem",marginTop:4}),input:e=>({...e,color:"#111827"}),singleValue:e=>({...e,color:"#111827"}),option:(e,n)=>({...e,backgroundColor:n.isSelected?"#6366f1":n.isFocused?"#f3f4f6":"#fff",color:n.isSelected?"#fff":"#111827",cursor:"pointer"})},[m,Z]=d.useState(""),[h,ee]=d.useState(""),[x,se]=d.useState(""),O=Array.from({length:31},(e,n)=>({value:(n+1).toString().padStart(2,"0"),label:(n+1).toString()})),D=[{value:"‡∏ä‡∏≤‡∏¢",label:"‡∏ä‡∏≤‡∏¢"},{value:"‡∏´‡∏ç‡∏¥‡∏á",label:"‡∏´‡∏ç‡∏¥‡∏á"}],M=[{value:"‡∏ô‡∏≤‡∏¢",label:"‡∏ô‡∏≤‡∏¢"},{value:"‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß",label:"‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß"},{value:"‡∏ô‡∏≤‡∏á",label:"‡∏ô‡∏≤‡∏á"}],$=[{value:"user",label:"User"},{value:"admin",label:"Admin"}],P=[{value:"internal",label:"‡∏†‡∏≤‡∏¢‡πÉ‡∏ô"},{value:"external",label:"‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å"}],I=["‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå","‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°","‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô","‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°","‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô","‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°","‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô","‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°","‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô","‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"].map((e,n)=>({value:(n+1).toString().padStart(2,"0"),label:e})),B=Array.from({length:100},(e,n)=>{const l=new Date().getFullYear()-n;return{value:l.toString(),label:`${l+543} (‡∏û.‡∏®.)`}});return d.useEffect(()=>{if(m&&h&&x){const e=new Date(parseInt(x),parseInt(h)-1,parseInt(m)).toISOString().split("T")[0];r("birthdate",e)}},[m,h,x]),d.useEffect(()=>{if(t.division_id&&t.user_type==="external"){const e=t.division_id.toString().padStart(2,"0"),n=Math.floor(100+Math.random()*900),l=`E${e}${n}`;R(l),r("emid",l)}},[t.user_type,t.division_id]),d.useEffect(()=>{if(m&&h&&x){const e=`${x}-${h}-${m}`;if(r("birthdate",e),c==="create"){const n=(parseInt(x)+543).toString(),l=`${m}${h}${n}`;T(l),r("password",l)}}},[m,h,x]),s.jsx(re,{title:c==="edit"?"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô":"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",breadcrumb:s.jsx(ie,{items:[{label:"‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö",href:route("admindashboard")},{label:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",href:route("admin.users.index")},{label:c==="edit"?"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ":"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å",active:!0}]}),children:s.jsx("div",{className:"max-w-5xl mx-auto px-6 py-10",children:s.jsxs(oe,{className:"p-8 space-y-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-indigo-600",children:c==="edit"?"‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô":"‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô"}),s.jsxs("form",{onSubmit:J,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(i,{children:"‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô (EMID)"}),s.jsx(g,{value:t.emid,onChange:e=>r("emid",e.target.value),readOnly:t.user_type==="external",className:t.user_type==="external"?"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white cursor-not-allowed":"dark:bg-gray-800 dark:text-white"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["*"," ",t.user_type==="external"?"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡∏¢‡∏á‡∏≤‡∏ô":"‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç 6 ‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ"]})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠"}),s.jsx(j,{options:M,value:M.find(e=>e.value===t.prename)||null,onChange:e=>r("prename",(e==null?void 0:e.value)||""),isClearable:!0,placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...",theme:o,styles:u})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏ä‡∏∑‡πà‡∏≠"}),s.jsx(g,{value:t.fname,onChange:e=>r("fname",e.target.value),className:"dark:bg-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"}),s.jsx(g,{value:t.lname,onChange:e=>r("lname",e.target.value),className:"dark:bg-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡πÄ‡∏û‡∏®"}),s.jsx(f,{options:D,value:D.find(e=>e.value===t.sex)||null,onChange:e=>r("sex",(e==null?void 0:e.value)||""),isClearable:!0,placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...",theme:o,styles:u})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô"}),s.jsx(f,{options:E,value:E.find(e=>e.value===t.position_id)||null,onChange:e=>r("position_id",(e==null?void 0:e.value)||""),onCreateOption:X,isClearable:!0,placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...",theme:o,styles:u})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏£‡∏∞‡∏î‡∏±‡∏ö"}),s.jsx(g,{value:t.grade,onChange:e=>r("grade",e.target.value),className:"dark:bg-gray-800 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏Å‡∏≠‡∏á"}),s.jsx(f,{options:_,value:_.find(e=>e.value===t.department_id)||null,onChange:e=>r("department_id",(e==null?void 0:e.value)||""),onCreateOption:Q,isClearable:!0,placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...",theme:o,styles:u})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏ù‡πà‡∏≤‡∏¢"}),s.jsx(f,{options:N,value:N.find(e=>e.value===t.faction_id)||null,onChange:e=>r("faction_id",(e==null?void 0:e.value)||""),onCreateOption:W,isClearable:!0,placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...",theme:o,styles:u})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏™‡∏≤‡∏¢‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"}),s.jsx(f,{options:k,value:k.find(e=>e.value===t.division_id)||null,onChange:e=>r("division_id",(e==null?void 0:e.value)||""),isClearable:!0,placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...",theme:o,styles:u})]}),c==="create"&&s.jsxs("div",{children:[s.jsx(i,{children:"‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(j,{options:O,value:O.find(e=>e.value===m),onChange:e=>Z((e==null?void 0:e.value)||""),isClearable:!0,placeholder:"‡∏ß‡∏±‡∏ô",theme:o,styles:o,className:"w-1/3"}),s.jsx(j,{options:I,value:I.find(e=>e.value===h),onChange:e=>ee((e==null?void 0:e.value)||""),isClearable:!0,placeholder:"‡πÄ‡∏î‡∏∑‡∏≠‡∏ô",theme:o,styles:u,className:"w-1/3"}),s.jsx(j,{options:B,value:B.find(e=>e.value===x),onChange:e=>se((e==null?void 0:e.value)||""),isClearable:!0,placeholder:"‡∏õ‡∏µ",theme:o,styles:u,className:"w-1/3"})]})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà"}),s.jsx(f,{options:$,value:$.find(e=>e.value===t.role)||null,onChange:e=>r("role",(e==null?void 0:e.value)||""),isClearable:!0,placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...",theme:o,styles:u})]}),s.jsxs("div",{children:[s.jsx(i,{children:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£"}),s.jsx(f,{options:P,value:P.find(e=>e.value===t.user_type)||null,onChange:e=>r("user_type",(e==null?void 0:e.value)||""),isClearable:!0,placeholder:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å...",theme:o,styles:u})]}),c==="create"&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(i,{children:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î)"}),s.jsx(g,{value:t.password,readOnly:!0,className:"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white cursor-not-allowed"})]}),c==="edit"&&s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"changePassword",checked:C,onChange:e=>{w(e.target.checked),e.target.checked||r("password","")},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),s.jsxs(i,{htmlFor:"changePassword",className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx(le,{size:16,className:"text-gray-500"}),s.jsx("span",{children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"})]})]}),C&&s.jsxs("div",{className:"space-y-3",children:[s.jsx(i,{htmlFor:"password",children:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà"}),s.jsxs("div",{className:"relative",children:[s.jsx(g,{id:"password",type:y?"text":"password",value:t.password,onChange:e=>r("password",e.target.value),className:"pr-12 dark:bg-gray-800 dark:text-white",placeholder:"‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà"}),s.jsx("button",{type:"button",onClick:()=>G(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:y?s.jsx(de,{size:16}):s.jsx(ce,{size:16})})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"üí° ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£"}),S.password&&s.jsxs("p",{className:"text-red-500 text-xs flex items-center space-x-1",children:[s.jsx(ue,{size:12}),s.jsx("span",{children:S.password})]})]})]})}),s.jsx("div",{className:"md:col-span-2 flex justify-end pt-4",children:s.jsxs(ne,{type:"submit",disabled:V,children:["üíæ"," ",c==="edit"?"‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ":"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà"]})})]})]})})})}export{Oe as default};
