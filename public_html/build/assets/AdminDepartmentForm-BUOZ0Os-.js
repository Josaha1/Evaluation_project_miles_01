import{K as k,r as u,m as C,j as r}from"./app-CvBoKgfj.js";import{M as N,B as E,t as i}from"./MainLayout-DXHIoJI3.js";import{B as M}from"./breadcrumb-BC5CAiAz.js";import{S as D}from"./react-select.esm-BSHX6GPi.js";import{L as f}from"./label-CSBkD6Sn.js";import{I as _}from"./input-CLa8Wrjy.js";import{C as B}from"./card-CwtR2BCI.js";import"./utils-ONoQxm8A.js";import"./createLucideIcon-DRc0qRU9.js";import"./x-CCAKE15G.js";const p=()=>document.documentElement.classList.contains("dark");function V(){var m;const{mode:a,department:t,divisions:b}=k().props,[s,x]=u.useState(p()),{data:d,setData:l,post:h,put:v,processing:g,errors:o}=C({name:(t==null?void 0:t.name)||"",division_id:((m=t==null?void 0:t.division_id)==null?void 0:m.toString())||""});u.useEffect(()=>{const e=new MutationObserver(()=>x(p()));return e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>e.disconnect()},[]);const j=e=>({...e,colors:{...e.colors,primary:"#6366f1",primary25:"#e0e7ff",neutral0:s?"#1f2937":"#fff",neutral5:s?"#374151":"#f3f4f6",neutral10:s?"#4b5563":"#e5e7eb",neutral20:s?"#6b7280":"#d1d5db",neutral30:"#9ca3af",neutral80:s?"#f9fafb":"#111827"}}),y={control:e=>({...e,backgroundColor:s?"#1f2937":"#fff",borderColor:s?"#4b5563":"#d1d5db",borderRadius:"0.5rem",fontSize:"0.875rem"}),menu:e=>({...e,backgroundColor:s?"#1f2937":"#fff",borderRadius:"0.5rem"}),singleValue:e=>({...e,color:s?"#f9fafb":"#111827"}),option:(e,n)=>({...e,backgroundColor:n.isSelected?"#6366f1":n.isFocused?s?"#374151":"#f3f4f6":"transparent",color:n.isSelected?"#fff":s?"#f9fafb":"#111827"})},c=b.map(e=>({value:e.id.toString(),label:e.name})),S=e=>{e.preventDefault(),a==="edit"&&t?v(route("admin.departments.update",{department:t.id}),{onSuccess:()=>i.success("แก้ไขหน่วยงานเรียบร้อยแล้ว"),onError:()=>i.error("ไม่สามารถบันทึกได้")}):h(route("admin.departments.store"),{onSuccess:()=>i.success("เพิ่มหน่วยงานเรียบร้อยแล้ว"),onError:()=>i.error("ไม่สามารถบันทึกได้")})};return r.jsx(N,{title:a==="edit"?"แก้ไขหน่วยงาน":"เพิ่มหน่วยงาน",breadcrumb:r.jsx(M,{items:[{label:"แดชบอร์ดผู้ดูแลระบบ",href:route("admindashboard")},{label:"จัดการหน่วยงาน",href:route("admin.departments.index")},{label:a==="edit"?"แก้ไข":"เพิ่มใหม่",active:!0}]}),children:r.jsx("div",{className:"max-w-2xl mx-auto px-6 py-10",children:r.jsxs(B,{className:"p-8 space-y-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-indigo-600",children:a==="edit"?"แก้ไขหน่วยงาน":"เพิ่มหน่วยงานใหม่"}),r.jsxs("form",{onSubmit:S,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx(f,{children:"ชื่อหน่วยงาน"}),r.jsx(_,{value:d.name,onChange:e=>l("name",e.target.value),placeholder:"กรอกชื่อหน่วยงาน",className:"dark:bg-gray-800 dark:text-white"}),o.name&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.name})]}),r.jsxs("div",{children:[r.jsx(f,{children:"สายงาน (Division)"}),r.jsx(D,{options:c,value:c.find(e=>e.value===d.division_id)||null,onChange:e=>l("division_id",(e==null?void 0:e.value)||""),isClearable:!0,placeholder:"เลือกสายงาน...",theme:j,styles:y}),o.division_id&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.division_id})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("a",{href:route("admin.departments.index"),className:"px-4 py-2 border rounded text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",children:"ยกเลิก"}),r.jsx(E,{type:"submit",disabled:g,children:a==="edit"?"บันทึกการแก้ไข":"บันทึก"})]})]})]})})})}export{V as default};
