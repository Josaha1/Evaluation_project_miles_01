import{K as f,m as g,r as y,j as e}from"./app-DQ2VkJ7f.js";import{t as n,M as j}from"./MainLayout-BTc9pcGZ.js";import{B as v}from"./breadcrumb-D7MOHieF.js";import"./Footer-TA0Z8X7z.js";import"./utils-ONoQxm8A.js";function A(){const{evaluation:c,part:l,flash:i}=f().props,{data:r,setData:d,post:m,processing:o}=g({aspects:[{name:"",description:"",has_subaspects:!1}]}),x=()=>{d("aspects",[...r.aspects,{name:"",description:"",has_subaspects:!1}])},h=t=>{r.aspects.length>1&&d("aspects",r.aspects.filter((s,a)=>a!==t))},u=(t,s,a)=>{const p=[...r.aspects];p[t][s]=a,d("aspects",p)},b=t=>{t.preventDefault(),m(route("aspects.store",{evaluation:c.id,part:l.id}),{onSuccess:()=>n.success("เพิ่มด้านสำเร็จ ✅"),onError:()=>n.error("เกิดข้อผิดพลาดในการเพิ่มด้าน ❌")})};return y.useEffect(()=>{i.success&&n.success(i.success),i.error&&n.error(i.error)},[i]),e.jsx(j,{title:"เพิ่มด้าน (Aspect)",breadcrumb:e.jsx(v,{items:[{label:"แดชบอร์ดผู้ดูแลระบบ",href:route("admindashboard")},{label:"รายการแบบประเมิน",href:route("evaluations.index")},{label:c.title,href:route("evaluations.edit",{evaluation:c.id})},{label:"ส่วน",href:route("parts.index",{evaluation:c.id})},{label:l.title,href:route("aspects.index",{evaluation:c.id,part:l.id})},{label:"เพิ่มด้าน",active:!0}]}),children:e.jsx("div",{className:"max-w-3xl mx-auto py-10",children:e.jsxs("form",{onSubmit:b,className:"space-y-6 bg-white dark:bg-gray-800 p-6 rounded shadow",children:[r.aspects.map((t,s)=>e.jsxs("div",{className:"border p-4 rounded bg-gray-50 dark:bg-gray-700 space-y-4 relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"font-semibold text-gray-700 dark:text-white",children:["ด้านที่ ",s+1]}),r.aspects.length>1&&e.jsx("button",{type:"button",className:"text-red-600 text-sm",onClick:()=>h(s),children:"ลบ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"ชื่อด้าน"}),e.jsx("input",{type:"text",className:"w-full border p-2 rounded dark:bg-gray-800 dark:text-white",value:t.name,onChange:a=>u(s,"name",a.target.value),required:!0})]}),e.jsx("div",{children:e.jsxs("label",{className:"inline-flex items-center text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"hidden",name:`aspects[${s}].has_subaspects`,value:"false"}),e.jsx("input",{type:"checkbox",className:"mr-2",checked:t.has_subaspects,onChange:a=>u(s,"has_subaspects",a.target.checked)}),"มีด้านย่อย (Sub-Aspects)"]})})]},s)),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{type:"button",onClick:x,className:"text-blue-600 hover:text-blue-800 text-sm",children:"➕ เพิ่มด้านใหม่"}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 disabled:opacity-50",disabled:o,children:o?"กำลังบันทึก...":"บันทึกด้าน"})]})]})})})}export{A as default};
