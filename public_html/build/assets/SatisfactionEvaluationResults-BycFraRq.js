import{r as v,j as e,L as y}from"./app-CvBoKgfj.js";import{M as w}from"./MainLayout-DXHIoJI3.js";import{C as j}from"./chart-column-C15hHFfI.js";import{D as _}from"./download-DjK1ARvY.js";import{U as S}from"./users-DXbyIlOD.js";import{S as p}from"./star-Reub-5yB.js";import{T as $}from"./trending-up-_mJY5oBO.js";import{A as F}from"./award-BmX9F9_t.js";import{F as C}from"./file-text-BjPG9inF.js";import{M as D}from"./message-circle-Bh7Di9_j.js";import"./utils-ONoQxm8A.js";import"./createLucideIcon-DRc0qRU9.js";import"./x-CCAKE15G.js";const E=({evaluation:n,fiscalYear:o,stats:a,questions:m,ratingScale:L,satisfactionEvaluations:i})=>{const[c,N]=v.useState("overview"),g=s=>s>=4.5?"text-green-600":s>=3.5?"text-blue-600":s>=2.5?"text-yellow-600":s>=1.5?"text-orange-600":"text-red-600",b=s=>s>=4.5?"bg-green-50 border-green-200":s>=3.5?"bg-blue-50 border-blue-200":s>=2.5?"bg-yellow-50 border-yellow-200":s>=1.5?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200",x=s=>e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(r=>e.jsx(p,{className:`w-4 h-4 ${r<=s?"text-gray-600 fill-current":"text-gray-300"}`},r))}),f=()=>{const r=[["ผลการประเมินความพึงพอใจ"],["การประเมิน:",n.title],["ปีงบประมาณ:",o],["วันที่ส่งออก:",new Date().toLocaleDateString("th-TH")],[""],["สรุปผลการประเมิน"],["จำนวนผู้ประเมิน:",a.total_responses.toString()],["คะแนนเฉลี่ย:",a.average_score.toFixed(2)],["ระดับความพึงพอใจ:",a.satisfaction_level],[""],["คะแนนเฉลี่ยแต่ละคำถาม"],...Object.entries(m).map(([t,u])=>{var h;return[u,((h=a.question_averages[t])==null?void 0:h.toFixed(2))||"0.00"]}),[""],["รายละเอียดการประเมิน"],["ชื่อผู้ประเมิน","ตำแหน่ง","หน่วยงาน","คะแนนเฉลี่ย","ระดับความพึงพอใจ","วันที่ประเมิน","ความคิดเห็น"],...i.map(t=>[t.user.name,t.user.position,t.user.division,t.average_score.toFixed(2),t.satisfaction_level,t.created_at,t.additional_comments||"-"])].map(t=>t.join(",")).join(`
`),d=new Blob([r],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(d),l.download=`ผลการประเมินความพึงพอใจ_${n.title}_${o}.csv`,l.click()};return e.jsxs(w,{children:[e.jsx(y,{title:`ผลการประเมินความพึงพอใจ - ${n.title}`}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx(j,{className:"w-6 h-6 text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ผลการประเมินความพึงพอใจ"}),e.jsxs("p",{className:"text-gray-600",children:[n.title," - ปีงบประมาณ ",o]})]})]}),e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(_,{className:"w-4 h-4 text-gray-300"}),"ส่งออกรายงาน"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"จำนวนผู้ประเมิน"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.total_responses})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"คะแนนเฉลี่ย"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.average_score.toFixed(2)})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ระดับความพึงพอใจ"}),e.jsx("p",{className:`text-lg font-bold ${g(a.average_score)}`,children:a.satisfaction_level})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"เปอร์เซ็นต์"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[(a.average_score/5*100).toFixed(1),"%"]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg mb-8",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"ภาพรวม",icon:j},{id:"details",label:"รายละเอียด",icon:C},{id:"comments",label:"ความคิดเห็น",icon:D}].map(s=>{const r=s.icon;return e.jsxs("button",{onClick:()=>N(s.id),className:`flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm transition-colors ${c===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(r,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{children:s.label})]},s.id)})})}),e.jsxs("div",{className:"p-6",children:[c==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"คะแนนเฉลี่ยแต่ละคำถาม"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:Object.entries(m).map(([s,r],d)=>{const l=a.question_averages[s]||0;return e.jsxs("div",{className:`p-4 rounded-lg border ${b(l)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center text-sm font-semibold",children:d+1}),e.jsx("p",{className:"font-medium text-gray-900",children:r})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x(Math.round(l)),e.jsx("span",{className:`text-lg font-bold ${g(l)}`,children:l.toFixed(2)})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${l/5*100}%`}})})]},s)})})]}),c==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["รายละเอียดการประเมิน (",i.length," คน)"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map(s=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.user.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.user.position," • ",s.user.division]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x(Math.round(s.average_score)),e.jsx("span",{className:`text-lg font-bold ${s.satisfaction_color}`,children:s.average_score.toFixed(2)})]}),e.jsx("p",{className:`text-sm font-medium ${s.satisfaction_color}`,children:s.satisfaction_level})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:Object.entries(s.scores).map(([r,d])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Q",r.split("_")[1],":"]}),e.jsx("span",{className:"font-medium",children:d})]},r))}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["ประเมินเมื่อ: ",new Date(String(s.created_at)).toLocaleDateString("th-TH")]})]},s.id))})]}),c==="comments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"ความคิดเห็นเพิ่มเติม"}),e.jsxs("div",{className:"space-y-4",children:[i.filter(s=>s.additional_comments).map(s=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.user.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.user.position," • ",s.user.division]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x(Math.round(s.average_score)),e.jsx("span",{className:`text-sm font-medium ${s.satisfaction_color}`,children:s.average_score.toFixed(2)})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:e.jsx("p",{className:"text-gray-700",children:s.additional_comments})}),e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:new Date(String(s.created_at)).toLocaleDateString("th-TH")})]},s.id)),i.filter(s=>s.additional_comments).length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"ไม่มีความคิดเห็นเพิ่มเติม"})]})]})]})]})]})})]})};export{E as default};
