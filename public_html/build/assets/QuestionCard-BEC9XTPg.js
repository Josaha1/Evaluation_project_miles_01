import{r as d,j as i}from"./app-CvBoKgfj.js";import{M as H,u as L,P as D,a as F,b as W,L as B,m as _}from"./proxy-DyelskbD.js";import{c as K}from"./utils-ONoQxm8A.js";import{I as P}from"./input-CLa8Wrjy.js";class U extends d.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const m=a.offsetParent,o=m instanceof HTMLElement&&m.offsetWidth||0,c=this.props.sizeRef.current;c.height=a.offsetHeight||0,c.width=a.offsetWidth||0,c.top=a.offsetTop,c.left=a.offsetLeft,c.right=o-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function V({children:l,isPresent:s,anchorX:a}){const m=d.useId(),o=d.useRef(null),c=d.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:b}=d.useContext(H);return d.useInsertionEffect(()=>{const{width:f,height:u,top:N,left:r,right:h}=c.current;if(s||!o.current||!f||!u)return;const y=a==="left"?`left: ${r}`:`right: ${h}`;o.current.dataset.motionPopId=m;const g=document.createElement("style");return b&&(g.nonce=b),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${u}px !important;
            ${y}px !important;
            top: ${N}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[s]),i.jsx(U,{isPresent:s,childRef:o,sizeRef:c,children:d.cloneElement(l,{ref:o})})}const G=({children:l,initial:s,isPresent:a,onExitComplete:m,custom:o,presenceAffectsLayout:c,mode:b,anchorX:f})=>{const u=L(X),N=d.useId();let r=!0,h=d.useMemo(()=>(r=!1,{id:N,initial:s,isPresent:a,custom:o,onExitComplete:y=>{u.set(y,!0);for(const g of u.values())if(!g)return;m&&m()},register:y=>(u.set(y,!1),()=>u.delete(y))}),[a,u,m]);return c&&r&&(h={...h}),d.useMemo(()=>{u.forEach((y,g)=>u.set(g,!1))},[a]),d.useEffect(()=>{!a&&!u.size&&m&&m()},[a]),b==="popLayout"&&(l=i.jsx(V,{isPresent:a,anchorX:f,children:l})),i.jsx(D.Provider,{value:h,children:l})};function X(){return new Map}const M=l=>l.key||"";function T(l){const s=[];return d.Children.forEach(l,a=>{d.isValidElement(a)&&s.push(a)}),s}const q=({children:l,custom:s,initial:a=!0,onExitComplete:m,presenceAffectsLayout:o=!0,mode:c="sync",propagate:b=!1,anchorX:f="left"})=>{const[u,N]=F(b),r=d.useMemo(()=>T(l),[l]),h=b&&!u?[]:r.map(M),y=d.useRef(!0),g=d.useRef(r),C=L(()=>new Map),[p,E]=d.useState(r),[k,R]=d.useState(r);W(()=>{y.current=!1,g.current=r;for(let v=0;v<k.length;v++){const x=M(k[v]);h.includes(x)?C.delete(x):C.get(x)!==!0&&C.set(x,!1)}},[k,h.length,h.join("-")]);const S=[];if(r!==p){let v=[...r];for(let x=0;x<k.length;x++){const t=k[x],e=M(t);h.includes(e)||(v.splice(x,0,t),S.push(t))}return c==="wait"&&S.length&&(v=S),R(T(v)),E(r),null}const{forceRender:$}=d.useContext(B);return i.jsx(i.Fragment,{children:k.map(v=>{const x=M(v),t=b&&!u?!1:r===k||h.includes(x),e=()=>{if(C.has(x))C.set(x,!0);else return;let n=!0;C.forEach(w=>{w||(n=!1)}),n&&($==null||$(),R(g.current),b&&(N==null||N()),m&&m())};return i.jsx(G,{isPresent:t,initial:!y.current||a?void 0:!1,custom:s,presenceAffectsLayout:o,mode:c,onExitComplete:t?void 0:e,anchorX:f,children:v},x)})})};function J({className:l,...s}){return i.jsx("textarea",{"data-slot":"textarea",className:K("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",l),...s})}function ee({question:l,answer:s,onAnswerChange:a,questionNumber:m}){var x;const[o,c]=d.useState(""),[b,f]=d.useState(null),[u,N]=d.useState(!1),r=(x=l.options)==null?void 0:x.find(t=>t.label.includes("อื่น")||t.label.toLowerCase().includes("other")||t.label.includes("อื่นๆ"));d.useEffect(()=>{var t;!u&&s!==void 0&&(r&&(typeof s=="object"&&s!==null&&!Array.isArray(s)?s.other_text&&(c(s.other_text),f(s.option_id||r.id)):typeof s=="string"&&!((t=l.options)!=null&&t.some(e=>e.id.toString()===s||e.score.toString()===s))?(c(s),f(r.id)):Array.isArray(s)&&s.forEach((e,n)=>{typeof e=="object"&&e!==null&&e.option_id===r.id?(c(e.other_text||""),f(r.id)):e===r.id&&f(r.id)})),N(!0))},[s,r==null?void 0:r.id,l.id,u]);const h=t=>{if(l.type==="choice")t===(r==null?void 0:r.id)?(f(t),o.trim()?a({option_id:t,other_text:o.trim()}):a(t)):(f(null),c(""),a(t));else if(l.type==="multiple_choice"){const e=Array.isArray(s)?s:[];let n;e.includes(t)?(n=e.filter(w=>w!==t),t===(r==null?void 0:r.id)&&(f(null),c(""))):(n=[...e,t],t===(r==null?void 0:r.id)&&f(t)),a(n)}},y=t=>{if(c(t),l.type==="choice"&&b===(r==null?void 0:r.id))t.trim()?a({option_id:r.id,other_text:t.trim()}):a(r.id);else if(l.type==="multiple_choice"&&b===(r==null?void 0:r.id)){const n=(Array.isArray(s)?s:[]).filter(w=>w!==(r==null?void 0:r.id));t.trim()?a([...n,{option_id:r.id,other_text:t.trim()}]):a([...n,r.id])}},g=t=>{a(t)},C=t=>{a(t)},p=t=>{var e,n,w;if(l.type==="choice")return typeof s=="object"&&s!==null&&!Array.isArray(s)?s.option_id===t:s===t||((n=(e=l.options)==null?void 0:e.find(j=>j.id===t))==null?void 0:n.score)===s;if(l.type==="multiple_choice"){if(Array.isArray(s))return s.some(j=>{var A,z;return typeof j=="object"&&j!==null?j.option_id===t:j===t||((z=(A=l.options)==null?void 0:A.find(Q=>Q.id===t))==null?void 0:z.score)===j})}else if(l.type==="rating"){const j=(w=l.options)==null?void 0:w.find(A=>A.id===t);return j&&s===j.score}return!1},E=t=>{var e;return!r||t!==r.id?!1:p(t)||b===t||typeof s=="object"&&s!==null&&!Array.isArray(s)&&s.option_id===t||typeof s=="string"&&!((e=l.options)!=null&&e.some(n=>n.id.toString()===s||n.score.toString()===s))},k=()=>{var t;return i.jsx("div",{className:"space-y-3",children:(t=l.options)==null?void 0:t.map(e=>i.jsxs("div",{className:"space-y-2",children:[i.jsx(_.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                            p-4 rounded-xl border-2 cursor-pointer transition-all duration-200
                            ${p(e.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-400"}
                        `,onClick:()=>h(e.id),children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`
                                    w-5 h-5 rounded-full border-2 flex items-center justify-center
                                    ${p(e.id)?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-500"}
                                `,children:p(e.id)&&i.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:`
                                    ${p(e.id)?"text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300"}
                                `,children:e.label}),e.description&&i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:e.description}),i.jsx("div",{className:`text-xs mt-1 ${p(e.id)?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500"}`})]})]})}),e.id===(r==null?void 0:r.id)&&E(e.id)&&i.jsx(_.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-8 mt-2",children:i.jsx(P,{placeholder:"กรุณาระบุ...",value:o,onChange:n=>y(n.target.value),className:"w-full",autoFocus:!o})})]},e.id))})},R=()=>{var t;return i.jsx("div",{className:"space-y-3",children:(t=l.options)==null?void 0:t.map(e=>i.jsxs("div",{className:"space-y-2",children:[i.jsx(_.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                            p-4 rounded-xl border-2 cursor-pointer transition-all duration-200
                            ${p(e.id)?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-green-300 dark:hover:border-green-400"}
                        `,onClick:()=>h(e.id),children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`
                                    w-5 h-5 rounded border-2 flex items-center justify-center
                                    ${p(e.id)?"border-green-500 bg-green-500":"border-gray-300 dark:border-gray-500"}
                                `,children:p(e.id)&&i.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:`
                                    ${p(e.id)?"text-green-700 dark:text-green-300 font-medium":"text-gray-700 dark:text-gray-300"}
                                `,children:e.label}),e.description&&i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:e.description}),i.jsx("div",{className:`text-xs mt-1 ${p(e.id)?"text-green-600 dark:text-green-400":"text-gray-400 dark:text-gray-500"}`})]})]})}),e.id===(r==null?void 0:r.id)&&E(e.id)&&i.jsx(_.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"ml-8 mt-2",children:i.jsx(P,{placeholder:"กรุณาระบุ...",value:o,onChange:n=>y(n.target.value),className:"w-full",autoFocus:!o})})]},e.id))})},S=t=>{switch(t){case 5:return"ดีเยี่ยม  (แสดงพฤติกรรมที่สอดคล้องกับ Core Values ในการเป็นต้นแบบได้อย่างโดดเด่น)";case 4:return"ดีมาก  (แสดงพฤติกรรมในการดำเนินการประเด็นดังกล่าวเหนือกว่าความต้องการของท่าน)";case 3:return"ดี (แสดงพฤติกรรมที่สอดคล้องในระดับพื้นฐาน)";case 2:return"ต้องปรับปรุง (ควรพิจารณาเพื่อดำเนินการปรับปรุง/พัฒนาประเด็นดังกล่าวในระยะเวลาที่เหมาะสม)";case 1:return"ต้องปรับปรุงอย่างมาก ";default:return""}},$=()=>{var t;return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"text-center",children:i.jsx("h5",{className:"font-medium text-gray-900 dark:text-gray-100 mb-3",children:"กรุณาเลือกระดับคะแนน"})}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-2 sm:gap-3 md:flex md:flex-wrap md:gap-4 md:justify-center max-w-lg sm:max-w-none mx-auto md:mx-0",children:(t=l.options)==null?void 0:t.map(e=>i.jsxs(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g(e.score),className:`
                               relative group touch-manipulation md:min-w-[80px] px-2 py-3 sm:px-3 sm:py-3 md:px-6 md:py-4 rounded-lg sm:rounded-xl border sm:border-2 font-semibold transition-all duration-200 min-h-[60px] sm:min-h-[70px] md:min-h-[80px] flex items-center justify-center
                                ${s===e.score?e.score===5?"border-green-500 bg-green-500 text-white shadow-lg":e.score===4?"border-blue-500 bg-blue-500 text-white shadow-lg":e.score===3?"border-yellow-500 bg-yellow-500 text-white shadow-lg":e.score===2?"border-orange-500 bg-orange-500 text-white shadow-lg":"border-red-500 bg-red-500 text-white shadow-lg":"border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400"}
                            `,children:[i.jsxs("div",{className:"text-center w-full",children:[i.jsx("div",{className:"text-lg sm:text-xl md:text-xl font-bold mb-1",children:e.score}),i.jsx("div",{className:"text-xs md:text-xs opacity-90 leading-tight px-1",children:e.score===5?"ดีเยี่ยม":e.score===4?"ดีมาก":e.score===3?"ดี":e.score===2?"ต้องปรับปรุง":"ต้องปรับปรุงอย่างมาก"})]}),i.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap max-w-xs text-center z-10",children:[e.description||S(e.score),i.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]},e.id))})]})})},v=()=>i.jsx(J,{placeholder:"กรุณาใส่คำตอบของคุณ...",value:s||"",onChange:t=>C(t.target.value),className:"min-h-[100px] sm:min-h-[120px] resize-none text-sm sm:text-base p-3 sm:p-4 rounded-lg sm:rounded-xl border sm:border-2 border-gray-200 dark:border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 bg-white dark:bg-gray-800 touch-manipulation"});return i.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-gray-200/50 dark:border-gray-700/50 shadow-sm",children:i.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[i.jsx("div",{className:"flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-xs sm:text-sm",children:m}),i.jsxs("div",{className:"flex-1 space-y-3 sm:space-y-4",children:[i.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white leading-relaxed",children:l.title}),i.jsxs("div",{className:"mt-3 sm:mt-4",children:[l.type==="choice"&&k(),l.type==="multiple_choice"&&R(),l.type==="rating"&&$(),l.type==="open_text"&&v()]})]})]})})}export{q as A,ee as Q};
