import{r as b,j as e,K as De}from"./app-CvBoKgfj.js";import{M as Me,S as qe,a as Ue,b as Ge,C as M}from"./MainLayout-DXHIoJI3.js";import{U as T}from"./user-D05-Tt5S.js";import{D as z}from"./download-DjK1ARvY.js";import{X as q}from"./x-CCAKE15G.js";import{T as Ie}from"./trophy-CTCBHstZ.js";import{C as Y}from"./chart-column-C15hHFfI.js";import{T as H,C as Pe}from"./target-DWWwhxQB.js";import{T as Z}from"./trending-up-_mJY5oBO.js";import{L as V}from"./loader-circle-CWVqcMXz.js";import{C as ze}from"./circle-alert-BO7xtVMv.js";import{c as X}from"./createLucideIcon-DRc0qRU9.js";import{C as P}from"./circle-check-big-B3RDgWwK.js";import{A as je}from"./award-BmX9F9_t.js";import{C}from"./clock-BUJdsIj_.js";import{R as Xe,D as He}from"./refresh-cw-LuzbHZDU.js";import{F as ue}from"./file-text-BjPG9inF.js";import{S as pe}from"./search-5RgAQkC2.js";import{C as U}from"./chevron-up-CG4FDNZU.js";import{U as ve}from"./users-DXbyIlOD.js";import{S as Ve}from"./star-Reub-5yB.js";import{C as be}from"./clipboard-list-Ca_LefZQ.js";import{E as Ne}from"./eye-CNMKZgja.js";import{S as We}from"./shield-DTJddVJq.js";import"./utils-ONoQxm8A.js";/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],ee=X("building",Qe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ye=X("grid-3x3",Be);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Oe=X("list",Ke);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Ye=X("pause",Je);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Ce=X("play",Ze),et=({userId:o,fiscalYear:a,isOpen:N,onClose:n})=>{const[r,l]=b.useState(null),[k,i]=b.useState(!1),[t,g]=b.useState(null),[j,c]=b.useState("overview");b.useEffect(()=>{N&&o&&x()},[N,o,a]);const x=async()=>{i(!0),g(null);try{const s=new URLSearchParams;a&&s.append("fiscal_year",a.toString());const m=route("admin.evaluation-report.user-details",{userId:o})+(s.toString()?"?"+s.toString():"");console.log("Fetching user details from:",m);const y=await fetch(m,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(!y.ok){const E=await y.text();throw console.error("Server response:",E),new Error(`HTTP ${y.status}: ${y.statusText}`)}const u=await y.json();if(console.log("User details result:",u),!u.user||!u.scores)throw new Error("Invalid response structure");l(u)}catch(s){const m=s instanceof Error?s.message:"เกิดข้อผิดพลาดในการโหลดข้อมูล";g(m),console.error("Error fetching user details:",s)}finally{i(!1)}},$=s=>{switch(s){case"self":return"ตนเอง";case"top":return"องศาบน";case"bottom":return"องศาล่าง";case"left":return"องศาซ้าย";case"right":return"องศาขวา";default:return s}},p=s=>{switch(s){case"self":return"bg-gray-500";case"top":return"bg-blue-500";case"bottom":return"bg-green-500";case"left":return"bg-yellow-500";case"right":return"bg-purple-500";default:return"bg-gray-500"}},_=s=>s>=4.5?"text-green-600":s>=4?"text-blue-600":s>=3.5?"text-yellow-600":s>=3?"text-orange-600":"text-red-600",f=s=>s>=4.5?"ดีเยี่ยม":s>=4?"ดีมาก":s>=3.5?"ดี":s>=3?"พอใช้":"ต้องปรับปรุง",S=s=>s?s.toFixed(2):"0.00",w=s=>`${s.toFixed(1)}%`;b.useMemo(()=>{if(!r)return null;const s=r.completion_data.completion_rate>=100?"completed":r.completion_data.completion_rate>=75?"nearly_complete":r.completion_data.completion_rate>0?"in_progress":"not_started",m=r.scores.average>=4.5?"excellent":r.scores.average>=4?"very_good":r.scores.average>=3.5?"good":r.scores.average>=3?"fair":"needs_improvement",y={grade:`${r.comparison_data.rank_in_grade}/${r.comparison_data.total_in_grade}`,division:`${r.comparison_data.rank_in_division}/${r.comparison_data.total_in_division}`};return{completionStatus:s,performanceLevel:m,rankingText:y}},[r]);const A=async()=>{var s;if(r)try{const m=new FormData;m.append("user_id",o.toString()),m.append("fiscal_year",a.toString()),m.append("_token",((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||"");const y=await fetch("/admin/reports/evaluation/export/individual-detailed",{method:"POST",body:m,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}});if(y.ok){const u=await y.blob(),E=window.URL.createObjectURL(u),R=document.createElement("a");R.href=E,R.download=`รายงานประเมินรายบุคคล_${r.user.name}_${a}.xlsx`,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(E)}else{const u=await y.json().catch(()=>null);throw new Error((u==null?void 0:u.message)||"Export failed")}}catch(m){console.error("Export error:",m),alert("ไม่สามารถส่งออกรายงานได้ กรุณาลองใหม่อีกครั้ง")}};return N?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-7xl w-full h-full max-h-[95vh] flex flex-col focus:outline-none",tabIndex:-1,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-xl flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 border-2 border-white flex items-center justify-center",children:e.jsx(T,{className:"h-5 w-5 text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h2",{id:"modal-title",className:"text-xl font-semibold",children:"รายงานการประเมิน 360 องศา - รายบุคคล"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["ปีงบประมาณ ",a]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r&&e.jsxs("button",{onClick:A,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors shadow-md",children:[e.jsx(z,{className:"h-4 w-4 text-gray-300"}),"ส่งออกรายงาน"]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-red-500 hover:bg-opacity-90 rounded-lg transition-colors","aria-label":"ปิดหน้าต่าง",title:"ปิดหน้าต่าง",children:e.jsx(q,{className:"h-5 w-5 text-gray-300"})})]})]}),r&&e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 flex-shrink-0",children:e.jsx("div",{className:"flex space-x-6 px-6 overflow-x-auto",children:[{id:"overview",label:"ภาพรวม",icon:Ie},{id:"scores",label:"คะแนนรายละเอียด",icon:Y},{id:"evaluators",label:"ผู้ประเมิน",icon:T},{id:"assignments",label:"ประเมินผู้อื่น",icon:H},{id:"comparison",label:"เปรียบเทียบ",icon:Z}].map(s=>{const m=s.icon;return e.jsxs("button",{onClick:()=>c(s.id),className:`flex items-center space-x-2 py-3 px-4 border-b-2 font-medium text-sm transition-colors whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${j===s.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,role:"tab","aria-selected":j===s.id,"aria-controls":`tab-panel-${s.id}`,children:[e.jsx(m,{className:"h-4 w-4","aria-hidden":"true"}),e.jsx("span",{children:s.label})]},s.id)})})}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-gray-50",role:"main","aria-live":"polite",children:e.jsxs("div",{className:"min-h-full",children:[k&&e.jsx("div",{className:"flex items-center justify-center py-20",role:"status","aria-label":"กำลังโหลดข้อมูล",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4","aria-hidden":"true"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"กำลังโหลดข้อมูลรายงาน..."}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"กรุณารอสักครู่"})]})}),t&&e.jsx("div",{className:"flex items-center justify-center py-20",role:"alert","aria-live":"assertive",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(ze,{className:"h-16 w-16 text-red-500 mx-auto mb-4","aria-hidden":"true"}),e.jsx("h3",{className:"text-xl font-semibold text-red-900 mb-2",children:"เกิดข้อผิดพลาด"}),e.jsx("p",{className:"text-red-600 mb-6",children:t}),e.jsx("button",{onClick:x,className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2","aria-label":"ลองโหลดข้อมูลใหม่",children:"ลองใหม่"})]})}),r&&e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-100 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center shadow-sm",children:e.jsx(T,{className:"h-8 w-8 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-1",children:r.user.name}),e.jsxs("p",{className:"text-gray-600 flex items-center gap-1 mb-2",children:[e.jsx(ee,{className:"h-4 w-4 text-gray-600"}),r.user.position," • ",r.user.division]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"inline-flex px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:["ระดับ C",r.user.grade]}),e.jsx("span",{className:"inline-flex px-3 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:r.user.user_type==="internal"?"พนักงานภายใน":"พนักงานภายนอก"}),e.jsxs("span",{className:"inline-flex px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:[w(r.completion_data.completion_rate)," สมบูรณ์"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:S(r.scores.average)}),e.jsx("div",{className:`text-sm font-medium ${_(r.scores.average)} mb-1`,children:f(r.scores.average)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[r.completion_data.completion_rate,"% เสร็จสิ้น"]})]})]})}),j==="overview"&&e.jsxs("div",{className:"space-y-6",role:"tabpanel",id:"tab-panel-overview","aria-labelledby":"tab-overview",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(P,{className:"h-8 w-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"ความคืบหน้า"}),e.jsx("p",{className:"text-sm text-gray-500",children:"การประเมิน"})]})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[r.completion_data.completion_rate,"%"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[r.completion_data.completed_angles,"/",r.completion_data.total_angles," คน"]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(je,{className:"h-8 w-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"คะแนนเฉลี่ย"}),e.jsx("p",{className:"text-sm text-gray-500",children:"รวมทุกมุมมอง"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.scores.average.toFixed(2)}),e.jsx("div",{className:"text-sm text-gray-500",children:"จาก 5.00 คะแนน"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(H,{className:"h-8 w-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"คำตอบทั้งหมด"}),e.jsx("p",{className:"text-sm text-gray-500",children:"จำนวนข้อมูล"})]})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.completion_data.total_answers}),e.jsx("div",{className:"text-sm text-gray-500",children:"คำตอบ"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"คะแนนตามมุมมอง"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(r.scores).filter(([s])=>s!=="average").map(([s,m])=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${p(s)}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:$(s)}),e.jsx("div",{className:"text-sm text-gray-500",children:m?m.toFixed(2):"N/A"})]})]},s))})]})]}),j==="scores"&&e.jsx("div",{className:"space-y-6",role:"tabpanel",id:"tab-panel-scores","aria-labelledby":"tab-scores",children:r.aspect_scores&&r.aspect_scores.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"คะแนนรายด้าน"}),e.jsx("div",{className:"space-y-4",children:r.aspect_scores.map((s,m)=>e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:s.aspect}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:s.score.toFixed(2)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s.percentage}%`}})}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[s.percentage.toFixed(1),"% จาก ",s.max_score," คะแนน"]})]},m))})]})}),j==="evaluators"&&e.jsx("div",{className:"space-y-6",role:"tabpanel",id:"tab-panel-evaluators","aria-labelledby":"tab-evaluators",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"ผู้ประเมิน"}),e.jsx("div",{className:"space-y-3",children:r.evaluators.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${p(s.angle)}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.division," • ",$(s.angle)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-blue-600",children:s.score.toFixed(2)}),s.completed?e.jsx(P,{className:"h-5 w-5 text-gray-500"}):e.jsx(C,{className:"h-5 w-5 text-gray-500"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.completed_at?new Date(String(s.completed_at)).toLocaleDateString("th-TH"):"รออนุมัติ"})]})]},s.id))})]})}),j==="comparison"&&e.jsx("div",{className:"space-y-6",role:"tabpanel",id:"tab-panel-comparison","aria-labelledby":"tab-comparison",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"การเปรียบเทียบคะแนน"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-700",children:"คะแนนของฉน"}),e.jsx("span",{className:"font-bold text-blue-600",children:r.scores.average.toFixed(2)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-700",children:"เฉลี่ยของระดับ"}),e.jsx("span",{className:"font-bold text-gray-600",children:r.comparison_data.grade_average.toFixed(2)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-700",children:"เฉลี่ยของหน่วยงาน"}),e.jsx("span",{className:"font-bold text-gray-600",children:r.comparison_data.division_average.toFixed(2)})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-700",children:"เฉลี่ยทั้งหมด"}),e.jsx("span",{className:"font-bold text-gray-600",children:r.comparison_data.overall_average.toFixed(2)})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"อันดับ"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.comparison_data.rank_in_grade}),e.jsxs("div",{className:"text-sm text-gray-600",children:["อันดับที่ในระดับ (จาก ",r.comparison_data.total_in_grade," คน)"]})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.comparison_data.rank_in_division}),e.jsxs("div",{className:"text-sm text-gray-600",children:["อันดับที่ในหน่วยงาน (จาก ",r.comparison_data.total_in_division," คน)"]})]})]})]})]})}),j==="assignments"&&e.jsx("div",{className:"space-y-6",role:"tabpanel",id:"tab-panel-assignments","aria-labelledby":"tab-assignments",children:r.evaluator_assignments&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"สรุปการประเมินผู้อื่น"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.evaluator_assignments.summary.total_assignments}),e.jsx("div",{className:"text-sm text-gray-600",children:"รายการทั้งหมด"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.evaluator_assignments.summary.completed_assignments}),e.jsx("div",{className:"text-sm text-gray-600",children:"เสร็จสิ้น"})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.evaluator_assignments.summary.in_progress_assignments}),e.jsx("div",{className:"text-sm text-gray-600",children:"กำลังดำเนินการ"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:r.evaluator_assignments.summary.not_started_assignments}),e.jsx("div",{className:"text-sm text-gray-600",children:"ยังไม่เริ่ม"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"ความคืบหน้ารวม"}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[r.evaluator_assignments.summary.overall_completion_percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${r.evaluator_assignments.summary.overall_completion_percentage}%`}})})]})]}),r.evaluator_assignments.summary.by_angle.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"สรุปตามมุมมอง"}),e.jsx("div",{className:"space-y-3",children:r.evaluator_assignments.summary.by_angle.map((s,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${p(s.angle)}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.angle_text}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.completed,"/",s.count," รายการ"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[s.completion_percentage,"%"]})})]},m))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"รายการประเมินผู้อื่น"}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[r.evaluator_assignments.assignments.map(s=>e.jsxs("div",{className:`p-4 border rounded-lg transition-colors ${s.progress.is_completed?"bg-green-50 border-green-200":s.progress.completion_percentage>0?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${p(s.angle)}`}),e.jsx("h5",{className:"font-medium text-gray-900",children:s.evaluatee.name}),s.progress.is_completed&&e.jsx(P,{className:"h-4 w-4 text-green-600"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[s.evaluatee.position," • ",s.evaluatee.division]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.angle_text," • ระดับ C",s.evaluatee.grade]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[s.progress.completion_percentage,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.progress.answered_questions,"/",s.progress.total_questions," ข้อ"]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${s.progress.is_completed?"bg-green-500":s.progress.completion_percentage>0?"bg-yellow-500":"bg-gray-400"}`,style:{width:`${s.progress.completion_percentage}%`}})})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="completed"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-yellow-100 text-yellow-800":s.status==="nearly_complete"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.status==="completed"?"เสร็จสิ้น":s.status==="in_progress"?"กำลังดำเนินการ":s.status==="nearly_complete"?"ใกล้เสร็จ":"ยังไม่เริ่ม"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.priority==="high"?"bg-red-100 text-red-800":s.priority==="medium"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:s.priority==="high"?"สำคัญมาก":s.priority==="medium"?"สำคัญ":"สำคัญน้อย"})]}),e.jsx("div",{children:s.progress.last_answered&&e.jsxs("span",{children:["อัปเดตล่าสุด: ",new Date(s.progress.last_answered).toLocaleDateString("th-TH")]})})]})]},s.assignment_id)),r.evaluator_assignments.assignments.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(H,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"ไม่มีรายการประเมินผู้อื่น"})]})]})]})]})})]})]})})]})}):null},Ft=()=>{const{props:o}=De(),{filters:a={},availableYears:N=[],availableDivisions:n=[],availableGrades:r=[],availableUsers:l=[],availableDepartments:k=[],availablePositions:i=[],fiscalYear:t=new Date().getFullYear().toString(),dashboardStats:g={totalParticipants:0,completedEvaluations:0,pendingEvaluations:0,overallCompletionRate:0,averageScore:0,totalQuestions:0,totalAnswers:0,uniqueEvaluators:0,uniqueEvaluatees:0,evaluationTypes:0,lastUpdated:new Date().toISOString()},evaluationMetrics:j={byGrade:[],byDivision:[],byAngle:[],trends:[]},detailedResults:c=[]}=o,[x,$]=b.useState({theme:"light",view:"dashboard",layout:"grid",compactMode:!1,autoRefresh:!1,refreshInterval:3e4}),[p,_]=b.useState({format:"excel",includeCharts:!0,includeRawData:!1,dateRange:"current",divisions:[],grades:[],reportType:"summary",onlyCompleted:!1}),[f,S]=b.useState(""),[w,A]=b.useState(""),[s,m]=b.useState(""),y=d=>{const v=Number(d);return v>=13?`ผู้ว่าการ (ระดับ ${v})`:v>=9?`ผู้บริหาร (ระดับ ${v})`:`พนักงาน (ระดับ ${v})`},[u,E]=b.useState("cards"),[R,G]=b.useState(!1),[te,W]=b.useState(null),[se,Q]=b.useState(!1),[fe,ae]=b.useState(!1),[re,le]=b.useState(null),[we,ne]=b.useState(null),[ke,ie]=b.useState(!1),[$e,B]=b.useState(!1),[ce,de]=b.useState(!1),[_e,Re]=b.useState(new Date),[xe,Se]=b.useState(new Set(["overview","grades","recent","divisions","angles"]));b.useEffect(()=>{if(x.autoRefresh){const d=setInterval(()=>{oe()},x.refreshInterval);return()=>clearInterval(d)}},[x.autoRefresh,x.refreshInterval]);const oe=b.useCallback(async()=>{G(!0);try{const d=await fetch("/admin/reports/evaluation/api/real-time-data",{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(d.ok){const v=await d.json();Re(new Date)}}catch(d){console.error("Failed to refresh data:",d)}finally{G(!1)}},[]),Ae=async d=>{var v;ie(!0);try{const h=await fetch(`/admin/reports/evaluation/api/evaluatee-details/${d}?fiscal_year=${t}`,{headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((v=document.querySelector('meta[name="csrf-token"]'))==null?void 0:v.getAttribute("content"))||""}});if(h.ok){const D=await h.json();ne(D)}else console.error("Failed to fetch evaluatee details")}catch(h){console.error("Error fetching evaluatee details:",h)}finally{ie(!1)}},Ee=d=>{le(d),ae(!0),Ae(d)},me=async d=>{var v;de(!0);try{const h=new FormData;h.append("fiscal_year",t),h.append("export_type",d),h.append("format",p.format),h.append("include_charts",p.includeCharts.toString()),h.append("include_raw_data",p.includeRawData.toString()),h.append("date_range",p.dateRange),h.append("report_type",p.reportType),h.append("only_completed",p.onlyCompleted.toString()),w&&h.append("division_id",w),s&&h.append("grade",s),d==="detailed-data"&&(h.get("evaluation_id")||h.append("evaluation_id","1")),p.divisions.forEach(F=>h.append("divisions[]",F)),p.grades.forEach(F=>h.append("grades[]",F.toString())),h.append("_token",((v=document.querySelector('meta[name="csrf-token"]'))==null?void 0:v.getAttribute("content"))||"");let D=`/admin/reports/evaluation/export/${d}`;d==="self-evaluation"&&(D="/admin/reports/evaluation/export/self-evaluation");const L=await fetch(D,{method:"POST",body:h,headers:{"X-Requested-With":"XMLHttpRequest"}});if(L.ok){const F=L.headers.get("content-type");if(F&&F.includes("application/json")){const Te=await L.json();throw new Error(Te.error||"ไม่สามารถส่งออกรายงานได้")}const J=await L.blob(),he=window.URL.createObjectURL(J),I=document.createElement("a");I.href=he;const Fe=p.format==="excel"?"xlsx":p.format==="pdf"?"pdf":"csv";I.download=`รายงานการประเมิน_${d}_${t}.${Fe}`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(he)}else{const F=L.headers.get("content-type");if(F&&F.includes("application/json")){const J=await L.json();throw new Error(J.error||`Export failed: ${L.status} ${L.statusText}`)}else throw new Error(`Export failed: ${L.status} ${L.statusText}`)}}catch(h){console.error("Export error:",h),alert("ไม่สามารถส่งออกรายงานได้ กรุณาลองใหม่อีกครั้ง")}finally{de(!1),B(!1)}},ge=b.useMemo(()=>!c||!Array.isArray(c)?[]:c.filter(d=>{const v=!f||d.evaluateeName.toLowerCase().includes(f.toLowerCase())||d.evaluateeDivision.toLowerCase().includes(f.toLowerCase())||d.evaluateePosition.toLowerCase().includes(f.toLowerCase()),h=!w||d.evaluateeDivision===w,D=!s||d.evaluateeGrade.toString()===s;return v&&h&&D}),[c,f,w,s]),Le=d=>{const v=new Set(xe);v.has(d)?v.delete(d):v.add(d),Se(v)},K=d=>d>=4.5?x.theme==="dark"?"text-green-400":"text-green-600":d>=4?x.theme==="dark"?"text-blue-400":"text-blue-600":d>=3.5?x.theme==="dark"?"text-yellow-400":"text-yellow-600":d>=3?x.theme==="dark"?"text-orange-400":"text-orange-600":x.theme==="dark"?"text-red-400":"text-red-600",O=d=>d>=90?x.theme==="dark"?"text-green-400":"text-green-600":d>=75?x.theme==="dark"?"text-blue-400":"text-blue-600":d>=50?x.theme==="dark"?"text-yellow-400":"text-yellow-600":x.theme==="dark"?"text-red-400":"text-red-600";return e.jsx(Me,{children:e.jsxs("div",{className:`min-h-screen transition-all duration-300 ${x.theme==="dark"?"bg-gradient-to-br from-slate-900 via-gray-900 to-slate-800":"bg-gradient-to-br from-slate-50 via-white to-gray-50"}`,children:[e.jsxs("div",{className:`shadow-xl relative overflow-hidden ${x.theme==="dark"?"bg-gradient-to-r from-slate-800 via-gray-900 to-slate-800":"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600"} text-white`,children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsxs("div",{className:"relative px-6 py-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center shadow-lg ${x.theme==="dark"?"bg-slate-700":"bg-white/20"} backdrop-blur-sm`,children:e.jsx(Y,{className:`h-8 w-8 ${x.theme==="dark"?"text-gray-300":"text-white"}`})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"รายงานการประเมิน 360 องศา"}),e.jsxs("p",{className:`text-lg ${x.theme==="dark"?"text-gray-300":"text-blue-100"}`,children:["ปีงบประมาณ ",t," • อัปเดตล่าสุด: ",_e.toLocaleTimeString("th-TH")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("button",{onClick:()=>$(d=>({...d,theme:d.theme==="dark"?"light":"dark"})),className:`p-3 rounded-xl transition-all duration-300 ${x.theme==="dark"?"bg-slate-700 hover:bg-slate-600":"bg-white/20 hover:bg-white/30"} backdrop-blur-sm`,title:x.theme==="dark"?"เปลี่ยนเป็นโหมดสว่าง":"เปลี่ยนเป็นโหมดมืด",children:x.theme==="dark"?e.jsx(qe,{className:"h-5 w-5 text-gray-300"}):e.jsx(Ue,{className:"h-5 w-5 text-white"})}),e.jsx("button",{onClick:()=>$(d=>({...d,autoRefresh:!d.autoRefresh})),className:`p-3 rounded-xl transition-all duration-300 ${x.autoRefresh?"bg-green-500 hover:bg-green-600":x.theme==="dark"?"bg-slate-700 hover:bg-slate-600":"bg-white/20 hover:bg-white/30"} backdrop-blur-sm`,title:x.autoRefresh?"ปิดการอัปเดตอัตโนมัติ":"เปิดการอัปเดตอัตโนมัติ",children:x.autoRefresh?e.jsx(Ye,{className:"h-5 w-5 text-white"}):e.jsx(Ce,{className:"h-5 w-5 text-gray-300"})}),e.jsx("button",{onClick:oe,disabled:R,className:`p-3 rounded-xl transition-all duration-300 ${x.theme==="dark"?"bg-slate-700 hover:bg-slate-600":"bg-white/20 hover:bg-white/30"} backdrop-blur-sm disabled:opacity-50`,title:"รีเฟรชข้อมูล",children:e.jsx(Xe,{className:`h-5 w-5 ${R?"animate-spin":""} ${x.theme==="dark"?"text-gray-300":"text-white"}`})}),e.jsxs("button",{onClick:()=>B(!0),className:"px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium transition-all duration-300 shadow-lg flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-gray-300"}),"ส่งออกรายงาน"]}),e.jsx("button",{className:`p-3 rounded-xl transition-all duration-300 ${x.theme==="dark"?"bg-slate-700 hover:bg-slate-600":"bg-white/20 hover:bg-white/30"} backdrop-blur-sm`,title:"ตั้งค่า",children:e.jsx(Ge,{className:`h-5 w-5 ${x.theme==="dark"?"text-gray-300":"text-white"}`})})]})]}),e.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:[{id:"dashboard",label:"แดชบอร์ด",icon:ye},{id:"analytics",label:"วิเคราะห์",icon:Z},{id:"reports",label:"รายงาน",icon:ue},{id:"exports",label:"ส่งออก",icon:z}].map(d=>{const v=d.icon;return e.jsxs("button",{onClick:()=>$(h=>({...h,view:d.id})),className:`px-4 py-2 rounded-lg font-medium transition-all duration-300 flex items-center gap-2 ${x.view===d.id?"bg-white text-blue-600 shadow-lg":x.theme==="dark"?"bg-slate-700/50 text-gray-300 hover:bg-slate-600/50":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx(v,{className:"h-4 w-4 text-gray-600"}),d.label]},d.id)})})]})]}),e.jsx("div",{className:`sticky top-0 z-40 ${x.theme==="dark"?"bg-slate-800/95 border-slate-700":"bg-white/95 border-gray-200"} backdrop-blur-sm border-b shadow-sm`,children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 gap-3 flex-wrap items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-64",children:[e.jsx(pe,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 ${x.theme==="dark"?"text-gray-400":"text-gray-500"}`}),e.jsx("input",{type:"text",placeholder:"ค้นหาชื่อ, หน่วยงาน, ตำแหน่ง...",value:f,onChange:d=>S(d.target.value),className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-300 ${x.theme==="dark"?"bg-slate-700 border-slate-600 text-gray-300 placeholder-gray-400 focus:border-blue-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500"} focus:ring-2 focus:ring-blue-500/20 focus:outline-none`})]}),e.jsxs("select",{value:w,onChange:d=>A(d.target.value),className:`px-4 py-3 rounded-xl border transition-all duration-300 ${x.theme==="dark"?"bg-slate-700 border-slate-600 text-gray-300":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500/20 focus:outline-none`,children:[e.jsx("option",{value:"",children:"ทุกหน่วยงาน"}),(n||[]).map(d=>e.jsx("option",{value:d.name,children:d.name},d.id))]}),e.jsxs("select",{value:s,onChange:d=>m(d.target.value),className:`px-4 py-3 rounded-xl border transition-all duration-300 ${x.theme==="dark"?"bg-slate-700 border-slate-600 text-gray-300":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500/20 focus:outline-none`,children:[e.jsx("option",{value:"",children:"ทุกระดับ"}),(r||[]).map(d=>e.jsx("option",{value:d.toString(),children:y(d)},d))]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:`flex rounded-xl p-1 ${x.theme==="dark"?"bg-slate-700":"bg-gray-100"}`,children:[{mode:"cards",icon:ye,label:"การ์ด"},{mode:"table",icon:Oe,label:"ตาราง"},{mode:"charts",icon:Y,label:"กราฟ"}].map(({mode:d,icon:v,label:h})=>e.jsxs("button",{onClick:()=>E(d),className:`px-3 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 ${u===d?x.theme==="dark"?"bg-slate-600 text-gray-300":"bg-white text-gray-900 shadow-sm":x.theme==="dark"?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"}`,title:h,children:[e.jsx(v,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:h})]},d))})})]}),(f||w||s)&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[f&&e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${x.theme==="dark"?"bg-blue-500/20 text-blue-300":"bg-blue-100 text-blue-800"}`,children:[e.jsx(pe,{className:"h-3 w-3 text-gray-600"}),f,e.jsx("button",{onClick:()=>S(""),className:"ml-1 hover:bg-blue-500/30 rounded",children:e.jsx(q,{className:"h-3 w-3 text-gray-600"})})]}),w&&e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${x.theme==="dark"?"bg-green-500/20 text-green-300":"bg-green-100 text-green-800"}`,children:[e.jsx(ee,{className:"h-3 w-3 text-gray-600"}),w,e.jsx("button",{onClick:()=>A(""),className:"ml-1 hover:bg-green-500/30 rounded",children:e.jsx(q,{className:"h-3 w-3 text-gray-600"})})]}),s&&e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${x.theme==="dark"?"bg-purple-500/20 text-purple-300":"bg-purple-100 text-purple-800"}`,children:[e.jsx(je,{className:"h-3 w-3 text-gray-600"}),y(s),e.jsx("button",{onClick:()=>m(""),className:"ml-1 hover:bg-purple-500/30 rounded",children:e.jsx(q,{className:"h-3 w-3 text-gray-600"})})]})]})]})}),e.jsxs("div",{className:"px-6 py-8",children:[x.view==="dashboard"&&e.jsx(tt,{dashboardStats:g,evaluationMetrics:j,filteredResults:ge,dashboardConfig:x,viewMode:u,expandedSections:xe,toggleSection:Le,getScoreColor:K,getCompletionColor:O,setSelectedUser:W,setShowIndividualReport:Q}),x.view==="analytics"&&e.jsx(st,{evaluationMetrics:j,dashboardConfig:x,getScoreColor:K,getCompletionColor:O}),x.view==="reports"&&e.jsx(at,{filteredResults:ge,dashboardConfig:x,viewMode:u,getScoreColor:K,getCompletionColor:O,setSelectedUser:W,setShowIndividualReport:Q,showEvaluateeDetailsModal:Ee}),x.view==="exports"&&e.jsx(rt,{exportOptions:p,setExportOptions:_,handleExport:me,isExporting:ce,dashboardConfig:x,availableDivisions:n,availableGrades:r})]}),se&&te&&e.jsx(et,{userId:te,fiscalYear:parseInt(t),isOpen:se,onClose:()=>{Q(!1),W(null)}}),$e&&e.jsx(lt,{exportOptions:p,setExportOptions:_,handleExport:me,isExporting:ce,onClose:()=>B(!1),dashboardConfig:x,availableDivisions:n,availableGrades:r}),fe&&re&&e.jsx(nt,{evaluateeId:re,evaluateeData:we,isLoading:ke,fiscalYear:t,onClose:()=>{ae(!1),le(null),ne(null)},dashboardConfig:x})]})})},tt=({dashboardStats:o,evaluationMetrics:a,filteredResults:N,dashboardConfig:n,viewMode:r,expandedSections:l,toggleSection:k,getScoreColor:i,getCompletionColor:t,setSelectedUser:g,setShowIndividualReport:j})=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:`rounded-2xl p-6 ${n.theme==="dark"?"bg-slate-800/50 border border-slate-700":"bg-white border border-gray-200"} shadow-xl backdrop-blur-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold ${n.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ภาพรวมการประเมิน"}),e.jsx("button",{onClick:()=>k("overview"),className:`p-2 rounded-lg transition-colors ${n.theme==="dark"?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:l.has("overview")?e.jsx(U,{className:`h-5 w-5 ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`}):e.jsx(M,{className:`h-5 w-5 ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`})})]}),l.has("overview")&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 lg:gap-6",children:[e.jsx("div",{className:`p-6 rounded-xl transition-all duration-300 hover:scale-105 ${n.theme==="dark"?"bg-gradient-to-br from-slate-700 to-slate-800 border border-slate-600":"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200"} shadow-lg hover:shadow-xl`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${n.theme==="dark"?"bg-slate-600":"bg-blue-500"}`,children:e.jsx(ve,{className:`h-6 w-6 ${n.theme==="dark"?"text-gray-300":"text-white"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`,children:"ผู้เข้าร่วม"}),e.jsx("p",{className:`text-2xl font-bold ${n.theme==="dark"?"text-gray-300":"text-blue-600"}`,children:((o==null?void 0:o.totalParticipants)||0).toLocaleString()})]})]})}),e.jsx("div",{className:`p-6 rounded-xl transition-all duration-300 hover:scale-105 ${n.theme==="dark"?"bg-gradient-to-br from-slate-700 to-slate-800 border border-slate-600":"bg-gradient-to-br from-green-50 to-green-100 border border-green-200"} shadow-lg hover:shadow-xl`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${n.theme==="dark"?"bg-slate-600":"bg-green-500"}`,children:e.jsx(P,{className:`h-6 w-6 ${n.theme==="dark"?"text-gray-300":"text-white"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`,children:"เสร็จสิ้น"}),e.jsx("p",{className:`text-2xl font-bold ${n.theme==="dark"?"text-gray-300":"text-green-600"}`,children:((o==null?void 0:o.completedEvaluations)||0).toLocaleString()})]})]})}),e.jsx("div",{className:`p-6 rounded-xl transition-all duration-300 hover:scale-105 ${n.theme==="dark"?"bg-gradient-to-br from-slate-700 to-slate-800 border border-slate-600":"bg-gradient-to-br from-orange-50 to-orange-100 border border-orange-200"} shadow-lg hover:shadow-xl`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${n.theme==="dark"?"bg-slate-600":"bg-orange-500"}`,children:e.jsx(C,{className:`h-6 w-6 ${n.theme==="dark"?"text-gray-300":"text-white"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`,children:"รอดำเนินการ"}),e.jsx("p",{className:`text-2xl font-bold ${n.theme==="dark"?"text-gray-300":"text-orange-600"}`,children:((o==null?void 0:o.pendingEvaluations)||0).toLocaleString()})]})]})}),e.jsx("div",{className:`p-6 rounded-xl transition-all duration-300 hover:scale-105 ${n.theme==="dark"?"bg-gradient-to-br from-slate-700 to-slate-800 border border-slate-600":"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200"} shadow-lg hover:shadow-xl`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${n.theme==="dark"?"bg-slate-600":"bg-purple-500"}`,children:e.jsx(Z,{className:`h-6 w-6 ${n.theme==="dark"?"text-gray-300":"text-white"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`,children:"% ความสำเร็จ"}),e.jsxs("p",{className:`text-2xl font-bold ${t((o==null?void 0:o.overallCompletionRate)||0)}`,children:[((o==null?void 0:o.overallCompletionRate)||0).toFixed(1),"%"]})]})]})}),e.jsx("div",{className:`p-6 rounded-xl transition-all duration-300 hover:scale-105 ${n.theme==="dark"?"bg-gradient-to-br from-slate-700 to-slate-800 border border-slate-600":"bg-gradient-to-br from-indigo-50 to-indigo-100 border border-indigo-200"} shadow-lg hover:shadow-xl`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${n.theme==="dark"?"bg-slate-600":"bg-indigo-500"}`,children:e.jsx(Ve,{className:`h-6 w-6 ${n.theme==="dark"?"text-gray-300":"text-white"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`,children:"คะแนนเฉลี่ย"}),e.jsx("p",{className:`text-2xl font-bold ${i((o==null?void 0:o.averageScore)||0)}`,children:((o==null?void 0:o.averageScore)||0).toFixed(2)})]})]})}),e.jsx("div",{className:`p-6 rounded-xl transition-all duration-300 hover:scale-105 ${n.theme==="dark"?"bg-gradient-to-br from-slate-700 to-slate-800 border border-slate-600":"bg-gradient-to-br from-pink-50 to-pink-100 border border-pink-200"} shadow-lg hover:shadow-xl`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${n.theme==="dark"?"bg-slate-600":"bg-pink-500"}`,children:e.jsx(be,{className:`h-6 w-6 ${n.theme==="dark"?"text-gray-300":"text-white"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`,children:"คำตอบทั้งหมด"}),e.jsx("p",{className:`text-2xl font-bold ${n.theme==="dark"?"text-gray-300":"text-pink-600"}`,children:((o==null?void 0:o.totalAnswers)||0).toLocaleString()})]})]})})]})]}),e.jsxs("div",{className:`rounded-2xl p-6 ${n.theme==="dark"?"bg-slate-800/50 border border-slate-700":"bg-white border border-gray-200"} shadow-xl backdrop-blur-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold ${n.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ผลการประเมินตามระดับตำแหน่ง"}),e.jsx("button",{onClick:()=>k("grades"),className:`p-2 rounded-lg transition-colors ${n.theme==="dark"?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:l.has("grades")?e.jsx(U,{className:`h-5 w-5 ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`}):e.jsx(M,{className:`h-5 w-5 ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`})})]}),l.has("grades")&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:((a==null?void 0:a.byGrade)||[]).map(c=>e.jsxs("div",{className:`p-6 rounded-xl border transition-all duration-300 hover:scale-105 ${n.theme==="dark"?"bg-slate-700/50 border-slate-600 hover:bg-slate-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"} shadow-lg hover:shadow-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:`text-lg font-bold ${n.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:getGradeLabel(c.grade)}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.theme==="dark"?"bg-slate-600 text-gray-300":"bg-blue-100 text-blue-800"}`,children:[c.total," คน"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${n.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"เสร็จสิ้น"}),e.jsxs("span",{className:`font-bold ${t((c==null?void 0:c.completionRate)||0)}`,children:[(c==null?void 0:c.completed)||0,"/",(c==null?void 0:c.total)||0," (",((c==null?void 0:c.completionRate)||0).toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${n.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"คะแนนเฉลี่ย"}),e.jsx("span",{className:`font-bold ${i((c==null?void 0:c.averageScore)||0)}`,children:((c==null?void 0:c.averageScore)||0).toFixed(2)})]}),e.jsx("div",{className:`w-full rounded-full h-2 ${n.theme==="dark"?"bg-slate-600":"bg-gray-200"}`,children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${(c==null?void 0:c.completionRate)||0}%`}})})]})]},c.grade))})]}),e.jsxs("div",{className:`rounded-2xl p-6 ${n.theme==="dark"?"bg-slate-800/50 border border-slate-700":"bg-white border border-gray-200"} shadow-xl backdrop-blur-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold ${n.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"รายงานล่าสุด"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-sm ${n.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:["แสดง ",N.length," รายการ"]}),e.jsx("button",{onClick:()=>k("recent"),className:`p-2 rounded-lg transition-colors ${n.theme==="dark"?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:l.has("recent")?e.jsx(U,{className:`h-5 w-5 ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`}):e.jsx(M,{className:`h-5 w-5 ${n.theme==="dark"?"text-gray-300":"text-gray-600"}`})})]})]}),l.has("recent")&&e.jsxs("div",{className:"space-y-4",children:[N.slice(0,10).map(c=>{var x,$,p,_;return e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 hover:scale-[1.02] ${n.theme==="dark"?"bg-slate-700/30 border-slate-600 hover:bg-slate-700/50":"bg-gray-50 border-gray-200 hover:bg-gray-100"} shadow-sm hover:shadow-md`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${n.theme==="dark"?"bg-slate-600":"bg-blue-100"}`,children:e.jsx(T,{className:`h-5 w-5 ${n.theme==="dark"?"text-gray-300":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-semibold ${n.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:(c==null?void 0:c.evaluateeName)||"N/A"}),e.jsxs("p",{className:`text-sm ${n.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:[(c==null?void 0:c.evaluateePosition)||"N/A"," • ",(c==null?void 0:c.evaluateeDivision)||"N/A"," • ",c!=null&&c.evaluateeGrade?getGradeLabel(c.evaluateeGrade):"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-bold ${i(((x=c==null?void 0:c.scores)==null?void 0:x.average)||0)}`,children:((($=c==null?void 0:c.scores)==null?void 0:$.average)||0).toFixed(2)}),e.jsxs("div",{className:`text-sm ${t(((p=c==null?void 0:c.completionStatus)==null?void 0:p.completionRate)||0)}`,children:[(((_=c==null?void 0:c.completionStatus)==null?void 0:_.completionRate)||0).toFixed(1),"% เสร็จสิ้น"]})]}),e.jsx("button",{onClick:()=>{g(c.id),j(!0)},className:`p-2 rounded-lg transition-colors ${n.theme==="dark"?"bg-slate-600 hover:bg-slate-500 text-gray-300":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:"ดูรายละเอียด",children:e.jsx(Ne,{className:"h-4 w-4 text-gray-300"})})]})]})},c.id)}),N.length===0&&e.jsxs("div",{className:`text-center py-12 ${n.theme==="dark"?"text-gray-400":"text-gray-500"}`,children:[e.jsx(be,{className:`h-12 w-12 mx-auto mb-4 ${n.theme==="dark"?"text-gray-300":"text-gray-400"}`}),e.jsx("p",{className:"text-lg font-medium",children:"ไม่พบข้อมูลการประเมิน"}),e.jsx("p",{className:"text-sm",children:"ลองปรับเปลี่ยนตัวกรองการค้นหา"})]})]})]})]}),st=({evaluationMetrics:o,dashboardConfig:a,getScoreColor:N,getCompletionColor:n})=>{const[r,l]=b.useState(new Set(["byDivision","byAngle","trends"])),k=i=>{const t=new Set(r);t.has(i)?t.delete(i):t.add(i),l(t)};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:`text-3xl font-bold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"วิเคราะห์ข้อมูลการประเมิน"}),e.jsxs("div",{className:`rounded-2xl p-6 ${a.theme==="dark"?"bg-slate-800/50 border border-slate-700":"bg-white border border-gray-200"} shadow-xl backdrop-blur-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:`text-2xl font-bold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ผลการประเมินตามหน่วยงาน"}),e.jsx("button",{onClick:()=>k("byDivision"),className:`p-2 rounded-lg transition-colors ${a.theme==="dark"?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:r.has("byDivision")?e.jsx(U,{className:`h-5 w-5 ${a.theme==="dark"?"text-gray-300":"text-gray-600"}`}):e.jsx(M,{className:`h-5 w-5 ${a.theme==="dark"?"text-gray-300":"text-gray-600"}`})})]}),r.has("byDivision")&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:((o==null?void 0:o.byDivision)||[]).map((i,t)=>e.jsxs("div",{className:`p-6 rounded-xl border transition-all duration-300 hover:scale-105 ${a.theme==="dark"?"bg-slate-700/50 border-slate-600 hover:bg-slate-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"} shadow-lg hover:shadow-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:`text-lg font-bold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:i.division||"ไม่ระบุหน่วยงาน"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${a.theme==="dark"?"bg-slate-600 text-gray-300":"bg-green-100 text-green-800"}`,children:[i.total," คน"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"เสร็จสิ้น"}),e.jsxs("span",{className:`font-bold ${n((i==null?void 0:i.completionRate)||0)}`,children:[(i==null?void 0:i.completed)||0,"/",(i==null?void 0:i.total)||0," (",((i==null?void 0:i.completionRate)||0).toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"คะแนนเฉลี่ย"}),e.jsx("span",{className:`font-bold ${N((i==null?void 0:i.averageScore)||0)}`,children:((i==null?void 0:i.averageScore)||0).toFixed(2)})]}),e.jsx("div",{className:`w-full rounded-full h-2 ${a.theme==="dark"?"bg-slate-600":"bg-gray-200"}`,children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${(i==null?void 0:i.completionRate)||0}%`}})})]})]},t))})]}),e.jsxs("div",{className:`rounded-2xl p-6 ${a.theme==="dark"?"bg-slate-800/50 border border-slate-700":"bg-white border border-gray-200"} shadow-xl backdrop-blur-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:`text-2xl font-bold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ผลการประเมินตามมุมมอง"}),e.jsx("button",{onClick:()=>k("byAngle"),className:`p-2 rounded-lg transition-colors ${a.theme==="dark"?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:r.has("byAngle")?e.jsx(U,{className:`h-5 w-5 ${a.theme==="dark"?"text-gray-300":"text-gray-600"}`}):e.jsx(M,{className:`h-5 w-5 ${a.theme==="dark"?"text-gray-300":"text-gray-600"}`})})]}),r.has("byAngle")&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:((o==null?void 0:o.byAngle)||[]).map((i,t)=>{const g=c=>{switch(c){case"self":return"ประเมินตนเอง";case"top":return"องศาบน";case"bottom":return"องศาล่าง";case"left":return"องศาซ้าย";case"right":return"องศาขวา";default:return c}},j=c=>{switch(c){case"self":return"from-gray-500 to-gray-600";case"top":return"from-blue-500 to-blue-600";case"bottom":return"from-green-500 to-green-600";case"left":return"from-yellow-500 to-yellow-600";case"right":return"from-purple-500 to-purple-600";default:return"from-gray-500 to-gray-600"}};return e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 hover:scale-105 ${a.theme==="dark"?"bg-slate-700/50 border-slate-600 hover:bg-slate-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"} shadow-lg hover:shadow-xl`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-12 h-12 mx-auto mb-3 rounded-full bg-gradient-to-br ${j(i.angle)} flex items-center justify-center`,children:e.jsx("span",{className:"text-white font-bold text-lg",children:i.angle.charAt(0).toUpperCase()})}),e.jsx("h4",{className:`text-sm font-bold mb-2 ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:g(i.angle)}),e.jsx("div",{className:`text-2xl font-bold mb-1 ${N((i==null?void 0:i.averageScore)||0)}`,children:((i==null?void 0:i.averageScore)||0).toFixed(2)}),e.jsxs("div",{className:`text-xs ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:[(i==null?void 0:i.completed)||0,"/",(i==null?void 0:i.total)||0," คน"]})]})},t)})})]}),e.jsxs("div",{className:`rounded-2xl p-6 ${a.theme==="dark"?"bg-slate-800/50 border border-slate-700":"bg-white border border-gray-200"} shadow-xl backdrop-blur-sm`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:`text-2xl font-bold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"แนวโน้มการประเมิน (12 เดือนล่าสุด)"}),e.jsx("button",{onClick:()=>k("trends"),className:`p-2 rounded-lg transition-colors ${a.theme==="dark"?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:r.has("trends")?e.jsx(U,{className:`h-5 w-5 ${a.theme==="dark"?"text-gray-300":"text-gray-600"}`}):e.jsx(M,{className:`h-5 w-5 ${a.theme==="dark"?"text-gray-300":"text-gray-600"}`})})]}),r.has("trends")&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:((o==null?void 0:o.trends)||[]).map((i,t)=>e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-300 hover:scale-105 ${a.theme==="dark"?"bg-slate-700/50 border-slate-600 hover:bg-slate-700":"bg-gray-50 border-gray-200 hover:bg-gray-100"} shadow-lg hover:shadow-xl`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-xs font-medium mb-2 ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:i.month_name||new Date(i.date).toLocaleDateString("th-TH",{month:"short",year:"numeric"})}),e.jsx("div",{className:`text-lg font-bold mb-1 ${N((i==null?void 0:i.averageScore)||0)}`,children:((i==null?void 0:i.averageScore)||0).toFixed(2)}),e.jsxs("div",{className:`text-xs ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:[(i==null?void 0:i.completions)||0," การประเมิน"]}),i.target&&e.jsxs("div",{className:`text-xs mt-1 ${((i==null?void 0:i.averageScore)||0)>=i.target?"text-green-600":"text-red-600"}`,children:["เป้าหมาย: ",i.target]})]})},t))})]})]})},at=({filteredResults:o,dashboardConfig:a,viewMode:N,getScoreColor:n,getCompletionColor:r,setSelectedUser:l,setShowIndividualReport:k,showEvaluateeDetailsModal:i})=>e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:`text-3xl font-bold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"รายงานประเมินรายบุคคล"}),N==="table"&&e.jsx("div",{className:`rounded-2xl overflow-hidden ${a.theme==="dark"?"bg-slate-800/50 border border-slate-700":"bg-white border border-gray-200"} shadow-xl`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${a.theme==="dark"?"bg-slate-700":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ชื่อ-นามสกุล"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ตำแหน่ง"}),e.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"หน่วยงาน"}),e.jsx("th",{className:`px-6 py-4 text-center text-sm font-semibold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"คะแนนเฉลี่ย"}),e.jsx("th",{className:`px-6 py-4 text-center text-sm font-semibold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ถูกประเมิน"}),e.jsx("th",{className:`px-6 py-4 text-center text-sm font-semibold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ประเมินผู้อื่น"}),e.jsx("th",{className:`px-6 py-4 text-center text-sm font-semibold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"จัดการ"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:o.map(t=>{var g,j,c,x,$,p,_,f,S,w,A,s,m,y,u,E,R,G;return e.jsxs("tr",{className:`hover:${a.theme==="dark"?"bg-slate-700/50":"bg-gray-50"} transition-colors`,children:[e.jsxs("td",{className:`px-6 py-4 ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:[e.jsx("div",{className:"font-medium",children:(t==null?void 0:t.evaluateeName)||"N/A"}),e.jsx("div",{className:`text-sm ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:t!=null&&t.evaluateeGrade?getGradeLabel(t.evaluateeGrade):"N/A"})]}),e.jsx("td",{className:`px-6 py-4 text-sm ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:(t==null?void 0:t.evaluateePosition)||"N/A"}),e.jsx("td",{className:`px-6 py-4 text-sm ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:(t==null?void 0:t.evaluateeDivision)||"N/A"}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`text-lg font-bold ${n(((g=t==null?void 0:t.scores)==null?void 0:g.average)||0)}`,children:(((j=t==null?void 0:t.scores)==null?void 0:j.average)||0).toFixed(2)})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${(((c=t==null?void 0:t.completionStatus)==null?void 0:c.completionRate)||0)>=100?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-300":(((x=t==null?void 0:t.completionStatus)==null?void 0:x.completionRate)||0)>=75?"bg-blue-100 text-blue-800 dark:bg-blue-500/20 dark:text-blue-300":"bg-orange-100 text-orange-800 dark:bg-orange-500/20 dark:text-orange-300"}`,children:[((($=t==null?void 0:t.completionStatus)==null?void 0:$.completionRate)||0).toFixed(1),"%"]}),e.jsxs("div",{className:`text-xs ${a.theme==="dark"?"text-gray-400":"text-gray-500"}`,children:[e.jsxs("div",{children:[(t==null?void 0:t.completed_angles)||0,"/",(t==null?void 0:t.available_angles)||5," คน"]}),e.jsxs("div",{children:[(t==null?void 0:t.total_answers)||0," คำตอบ"]})]})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${((p=t==null?void 0:t.evaluator_progress)==null?void 0:p.status)==="completed"?"bg-green-100 text-green-800 dark:bg-green-500/20 dark:text-green-300":((_=t==null?void 0:t.evaluator_progress)==null?void 0:_.status)==="nearly_complete"?"bg-blue-100 text-blue-800 dark:bg-blue-500/20 dark:text-blue-300":((f=t==null?void 0:t.evaluator_progress)==null?void 0:f.status)==="in_progress"?"bg-orange-100 text-orange-800 dark:bg-orange-500/20 dark:text-orange-300":((S=t==null?void 0:t.evaluator_progress)==null?void 0:S.status)==="not_started"?"bg-red-100 text-red-800 dark:bg-red-500/20 dark:text-red-300":"bg-gray-100 text-gray-800 dark:bg-gray-500/20 dark:text-gray-300"}`,children:[((w=t==null?void 0:t.evaluator_progress)==null?void 0:w.overall_progress_percentage)||0,"%"]}),e.jsxs("div",{className:`text-xs ${a.theme==="dark"?"text-gray-400":"text-gray-500"}`,children:[((A=t==null?void 0:t.evaluator_progress)==null?void 0:A.completed_assignments)||0,"/",((s=t==null?void 0:t.evaluator_progress)==null?void 0:s.total_assignments)||0," รายการ"]}),e.jsxs("div",{className:`text-xs ${a.theme==="dark"?"text-gray-500":"text-gray-400"}`,children:[((m=t==null?void 0:t.evaluator_progress)==null?void 0:m.total_questions_answered)||0,"/",((y=t==null?void 0:t.evaluator_progress)==null?void 0:y.total_questions_to_answer)||0," ข้อ"]}),e.jsx("div",{className:`w-16 mx-auto rounded-full h-1 ${a.theme==="dark"?"bg-slate-700":"bg-gray-200"}`,children:e.jsx("div",{className:`h-1 rounded-full transition-all duration-300 ${((u=t==null?void 0:t.evaluator_progress)==null?void 0:u.status)==="completed"?"bg-green-500":((E=t==null?void 0:t.evaluator_progress)==null?void 0:E.status)==="nearly_complete"?"bg-blue-500":((R=t==null?void 0:t.evaluator_progress)==null?void 0:R.status)==="in_progress"?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.max(((G=t==null?void 0:t.evaluator_progress)==null?void 0:G.overall_progress_percentage)||0,2)}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>{l(t.id),k(!0)},className:`p-2 rounded-lg transition-colors ${a.theme==="dark"?"bg-slate-600 hover:bg-slate-500 text-gray-300":"bg-blue-500 hover:bg-blue-600 text-white"}`,title:"ดูรายละเอียด",children:e.jsx(Ne,{className:"h-4 w-4 text-gray-300"})})})]},t.id)})})]})})}),N==="cards"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(t=>{var g,j,c,x,$,p,_,f,S,w,A,s,m,y,u,E,R;return e.jsxs("div",{className:`p-6 rounded-xl border transition-all duration-300 hover:scale-105 ${a.theme==="dark"?"bg-slate-800/50 border-slate-700 hover:bg-slate-800":"bg-white border-gray-200 hover:bg-gray-50"} shadow-lg hover:shadow-xl`,children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${a.theme==="dark"?"bg-slate-700":"bg-blue-100"}`,children:e.jsx(T,{className:`h-6 w-6 ${a.theme==="dark"?"text-gray-300":"text-blue-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-semibold ${a.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:(t==null?void 0:t.evaluateeName)||"N/A"}),e.jsx("p",{className:`text-sm ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:(t==null?void 0:t.evaluateePosition)||"N/A"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"คะแนนเฉลี่ย"}),e.jsx("span",{className:`font-bold text-lg ${n(((g=t==null?void 0:t.scores)==null?void 0:g.average)||0)}`,children:(((j=t==null?void 0:t.scores)==null?void 0:j.average)||0).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"ถูกประเมิน"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:`font-bold ${r(((c=t==null?void 0:t.completionStatus)==null?void 0:c.completionRate)||0)}`,children:[(((x=t==null?void 0:t.completionStatus)==null?void 0:x.completionRate)||0).toFixed(1),"%"]}),e.jsxs("div",{className:`text-xs ${a.theme==="dark","text-gray-500"}`,children:[e.jsxs("div",{children:[(t==null?void 0:t.completed_angles)||0,"/",(t==null?void 0:t.available_angles)||5," คน"]}),e.jsxs("div",{children:[(t==null?void 0:t.total_answers)||0," คำตอบ"]})]})]})]}),e.jsx("div",{className:`w-full rounded-full h-2 ${a.theme==="dark"?"bg-slate-600":"bg-gray-200"}`,children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${(($=t==null?void 0:t.completionStatus)==null?void 0:$.completionRate)||0}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`text-sm ${a.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"ประเมินผู้อื่น"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-bold ${((p=t==null?void 0:t.evaluator_progress)==null?void 0:p.status)==="completed"?"text-green-600 dark:text-green-400":((_=t==null?void 0:t.evaluator_progress)==null?void 0:_.status)==="nearly_complete"?"text-blue-600 dark:text-blue-400":((f=t==null?void 0:t.evaluator_progress)==null?void 0:f.status)==="in_progress"?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400"}`,children:[((S=t==null?void 0:t.evaluator_progress)==null?void 0:S.overall_progress_percentage)||0,"%"]}),e.jsxs("div",{className:`text-xs ${a.theme==="dark","text-gray-500"}`,children:[e.jsxs("div",{children:[((w=t==null?void 0:t.evaluator_progress)==null?void 0:w.completed_assignments)||0,"/",((A=t==null?void 0:t.evaluator_progress)==null?void 0:A.total_assignments)||0," รายการ"]}),e.jsxs("div",{children:[((s=t==null?void 0:t.evaluator_progress)==null?void 0:s.total_questions_answered)||0,"/",((m=t==null?void 0:t.evaluator_progress)==null?void 0:m.total_questions_to_answer)||0," ข้อ"]})]})]})]}),e.jsx("div",{className:`w-full rounded-full h-2 ${a.theme==="dark"?"bg-slate-600":"bg-gray-200"}`,children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${((y=t==null?void 0:t.evaluator_progress)==null?void 0:y.status)==="completed"?"bg-gradient-to-r from-green-500 to-emerald-500":((u=t==null?void 0:t.evaluator_progress)==null?void 0:u.status)==="nearly_complete"?"bg-gradient-to-r from-blue-500 to-indigo-500":((E=t==null?void 0:t.evaluator_progress)==null?void 0:E.status)==="in_progress"?"bg-gradient-to-r from-orange-500 to-yellow-500":"bg-gradient-to-r from-red-500 to-pink-500"}`,style:{width:`${Math.max(((R=t==null?void 0:t.evaluator_progress)==null?void 0:R.overall_progress_percentage)||0,2)}%`}})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{l(t.id),k(!0)},className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${a.theme==="dark"?"bg-slate-700 hover:bg-slate-600 text-gray-300":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:"ดูรายงาน"}),e.jsx("button",{onClick:()=>i(t.id),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${a.theme==="dark"?"bg-purple-700 hover:bg-purple-600 text-gray-300":"bg-purple-500 hover:bg-purple-600 text-white"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"รายละเอียด"]})})]})]},t.id)})})]}),rt=({exportOptions:o,setExportOptions:a,handleExport:N,isExporting:n,dashboardConfig:r,availableDivisions:l,availableGrades:k})=>{const i=[{id:"comprehensive",title:"รายงานรวมผู้บริหารและพนักงาน",description:"รายงานครบถ้วนทั้งผู้ว่าการ ระดับ 9-12 และ 5-8 พร้อม Option Mapping",icon:ee,color:"emerald"},{id:"governors",title:"รายงานผู้ว่าการ กนอ. (ระดับ 13)",description:"รายงานเฉพาะผู้ว่าการ ระดับ 13 พร้อมคะแนนถ่วงน้ำหนัก 360 องศา",icon:We,color:"rose"},{id:"executives",title:"รายงานผู้บริหารระดับ 9-12",description:"รายงานเฉพาะผู้บริหารระดับ 9-12 พร้อมคำถามและคะแนน",icon:Pe,color:"amber"},{id:"employees",title:"รายงานพนักงานระดับ 5-8",description:"รายงานเฉพาะพนักงานระดับ 5-8 พร้อมคำถามและคะแนน",icon:ve,color:"cyan"},{id:"self-evaluation",title:"การประเมินตนเอง",description:"รายงานการประเมินตนเองของทุกระดับพร้อมคำถามและคะแนน",icon:T,color:"indigo"},{id:"detailed-data",title:"รายงานรายละเอียดครบถ้วน",description:"ข้อมูลรายละเอียดทุกคำถาม ผู้ประเมิน และผู้ถูกประเมิน",icon:He,color:"violet"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:`text-3xl font-bold ${r.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ส่งออกรายงาน"}),e.jsx("div",{className:`px-4 py-2 rounded-xl ${r.theme==="dark"?"bg-slate-700 text-gray-300":"bg-blue-100 text-blue-800"}`,children:e.jsxs("span",{className:"text-sm font-medium",children:["รูปแบบ: ",o.format.toUpperCase()]})})]}),e.jsxs("div",{className:`rounded-2xl p-6 ${r.theme==="dark"?"bg-slate-800/50 border border-slate-700":"bg-white border border-gray-200"} shadow-xl`,children:[e.jsx("h3",{className:`text-xl font-bold mb-6 ${r.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ตั้งค่าการส่งออก"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r.theme==="dark"?"text-gray-300":"text-gray-700"}`,children:"รูปแบบไฟล์"}),e.jsxs("select",{value:o.format,onChange:t=>a(g=>({...g,format:t.target.value})),className:`w-full px-3 py-2 rounded-lg border ${r.theme==="dark"?"bg-slate-700 border-slate-600 text-gray-300":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500/20 focus:outline-none`,children:[e.jsx("option",{value:"excel",children:"Excel (.xlsx)"}),e.jsx("option",{value:"pdf",children:"PDF (.pdf)"}),e.jsx("option",{value:"csv",children:"CSV (.csv)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r.theme==="dark"?"text-gray-300":"text-gray-700"}`,children:"ช่วงเวลา"}),e.jsxs("select",{value:o.dateRange,onChange:t=>a(g=>({...g,dateRange:t.target.value})),className:`w-full px-3 py-2 rounded-lg border ${r.theme==="dark"?"bg-slate-700 border-slate-600 text-gray-300":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500/20 focus:outline-none`,children:[e.jsx("option",{value:"current",children:"ปีงบประมาณปัจจุบัน"}),e.jsx("option",{value:"all",children:"ทั้งหมด"}),e.jsx("option",{value:"custom",children:"กำหนดเอง"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${r.theme==="dark"?"text-gray-300":"text-gray-700"}`,children:"ประเภทรายงาน"}),e.jsxs("select",{value:o.reportType,onChange:t=>a(g=>({...g,reportType:t.target.value})),className:`w-full px-3 py-2 rounded-lg border ${r.theme==="dark"?"bg-slate-700 border-slate-600 text-gray-300":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-blue-500/20 focus:outline-none`,children:[e.jsx("option",{value:"summary",children:"สรุปภาพรวม"}),e.jsx("option",{value:"detailed",children:"รายละเอียดแบบเต็ม"}),e.jsx("option",{value:"individual",children:"รายบุคคล"}),e.jsx("option",{value:"comparison",children:"เปรียบเทียบ"})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:o.includeCharts,onChange:t=>a(g=>({...g,includeCharts:t.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:`text-sm ${r.theme==="dark"?"text-gray-300":"text-gray-700"}`,children:"รวมกราฟและแผนภูมิ"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:o.includeRawData,onChange:t=>a(g=>({...g,includeRawData:t.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:`text-sm ${r.theme==="dark"?"text-gray-300":"text-gray-700"}`,children:"รวมข้อมูลดิบ"})]}),e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:o.onlyCompleted,onChange:t=>a(g=>({...g,onlyCompleted:t.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:`text-sm ${r.theme==="dark"?"text-gray-300":"text-gray-700"}`,children:"เฉพาะผู้ทำครบแล้ว"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(t=>{const g=t.icon;return e.jsxs("div",{className:`p-6 rounded-xl border transition-all duration-300 hover:scale-105 ${r.theme==="dark"?"bg-slate-800/50 border-slate-700 hover:bg-slate-800":"bg-white border-gray-200 hover:bg-gray-50"} shadow-lg hover:shadow-xl`,children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center bg-${t.color}-100`,children:e.jsx(g,{className:`h-6 w-6 text-${t.color}-600 text-gray-600`})}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:`font-semibold ${r.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:t.title})})]}),e.jsx("p",{className:`text-sm mb-4 ${r.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:t.description}),e.jsxs("button",{onClick:()=>N(t.id),disabled:n,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors disabled:opacity-50 ${r.theme==="dark"?"bg-slate-700 hover:bg-slate-600 text-gray-300":`bg-${t.color}-500 hover:bg-${t.color}-600 text-white`} bg-blue-500 hover:bg-blue-600 text-white flex items-center justify-center gap-2`,children:[n?e.jsx(V,{className:"h-4 w-4 animate-spin text-gray-300"}):e.jsx(z,{className:"h-4 w-4 text-gray-300"}),n?"กำลังส่งออก...":"ส่งออก"]})]},t.id)})})]})},lt=({exportOptions:o,setExportOptions:a,handleExport:N,isExporting:n,onClose:r,dashboardConfig:l,availableDivisions:k,availableGrades:i})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto ${l.theme==="dark"?"bg-slate-800 border border-slate-700":"bg-white border border-gray-200"} shadow-2xl`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ตั้งค่าการส่งออกรายงาน"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${l.theme==="dark"?"hover:bg-slate-700 text-gray-300":"hover:bg-gray-100 text-gray-600"}`,children:e.jsx(q,{className:"h-5 w-5 text-gray-600"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-2 ${l.theme==="dark"?"text-gray-300":"text-gray-700"}`,children:"รูปแบบไฟล์"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["excel","pdf","csv"].map(t=>e.jsx("button",{onClick:()=>a(g=>({...g,format:t})),className:`p-3 rounded-lg border transition-colors ${o.format===t?l.theme==="dark"?"bg-blue-500/20 border-blue-400 text-blue-300":"bg-blue-100 border-blue-500 text-blue-700":l.theme==="dark"?"bg-slate-700 border-slate-600 text-gray-300 hover:bg-slate-600":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:t.toUpperCase()},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{onClick:()=>N("advanced"),disabled:n,className:"flex-1 py-3 px-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[n?e.jsx(V,{className:"h-5 w-5 animate-spin text-gray-300"}):e.jsx(z,{className:"h-5 w-5 text-gray-300"}),n?"กำลังส่งออก...":"ส่งออกรายงาน"]}),e.jsx("button",{onClick:r,className:`px-6 py-3 rounded-lg font-medium transition-colors ${l.theme==="dark"?"bg-slate-700 hover:bg-slate-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:"ยกเลิก"})]})]})]})})}),nt=({evaluateeId:o,evaluateeData:a,isLoading:N,fiscalYear:n,onClose:r,dashboardConfig:l})=>{var k,i,t,g,j,c,x,$,p,_,f,S,w,A;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:`rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto ${l.theme==="dark"?"bg-slate-800 border border-slate-700":"bg-white border border-gray-200"} shadow-2xl`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-2xl font-bold ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"รายละเอียดผู้ถูกประเมิน"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg hover:${l.theme==="dark"?"bg-slate-700":"bg-gray-100"} transition-colors`,children:e.jsx(q,{className:`h-6 w-6 ${l.theme==="dark"?"text-gray-300":"text-gray-600"}`})})]}),N?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(V,{className:`h-8 w-8 animate-spin ${l.theme==="dark"?"text-gray-300":"text-blue-600"}`}),e.jsx("span",{className:`ml-3 ${l.theme==="dark"?"text-gray-300":"text-gray-600"}`,children:"กำลังโหลดข้อมูล..."})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`p-4 rounded-xl ${l.theme==="dark"?"bg-slate-700/50":"bg-gray-50"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"ข้อมูลส่วนตัว"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"รหัสพนักงาน"}),e.jsx("p",{className:`text-lg ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:((k=a.user)==null?void 0:k.emid)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"ชื่อ-นามสกุล"}),e.jsx("p",{className:`text-lg ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:((i=a.user)==null?void 0:i.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"ระดับ"}),e.jsxs("p",{className:`text-lg ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:["C",((t=a.user)==null?void 0:t.grade)||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"หน่วยงาน"}),e.jsx("p",{className:`text-lg ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:((g=a.user)==null?void 0:g.division)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"ตำแหน่ง"}),e.jsx("p",{className:`text-lg ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:((j=a.user)==null?void 0:j.position)||"N/A"})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${l.theme==="dark"?"bg-slate-700/50":"bg-gray-50"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"สถานะการประเมิน"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 mx-auto rounded-full flex items-center justify-center ${l.theme==="dark"?"bg-green-900":"bg-green-100"}`,children:e.jsx(P,{className:`h-8 w-8 ${l.theme==="dark"?"text-green-400":"text-green-600"}`})}),e.jsx("p",{className:`mt-2 text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"เสร็จสิ้น"}),e.jsx("p",{className:`text-2xl font-bold ${l.theme==="dark"?"text-green-400":"text-green-600"}`,children:((c=a.completion_data)==null?void 0:c.completed_angles)||0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 mx-auto rounded-full flex items-center justify-center ${l.theme==="dark"?"bg-orange-900":"bg-orange-100"}`,children:e.jsx(C,{className:`h-8 w-8 ${l.theme==="dark"?"text-orange-400":"text-orange-600"}`})}),e.jsx("p",{className:`mt-2 text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"คงเหลือ"}),e.jsx("p",{className:`text-2xl font-bold ${l.theme==="dark"?"text-orange-400":"text-orange-600"}`,children:(((x=a.completion_data)==null?void 0:x.total_angles)||5)-((($=a.completion_data)==null?void 0:$.completed_angles)||0)}),e.jsx("p",{className:`text-xs mt-1 ${l.theme==="dark","text-gray-500"}`,children:"มุมการประเมิน"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 mx-auto rounded-full flex items-center justify-center ${l.theme==="dark"?"bg-blue-900":"bg-blue-100"}`,children:e.jsx(H,{className:`h-8 w-8 ${l.theme==="dark"?"text-blue-400":"text-blue-600"}`})}),e.jsx("p",{className:`mt-2 text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"ความสำเร็จ"}),e.jsxs("p",{className:`text-2xl font-bold ${l.theme==="dark"?"text-blue-400":"text-blue-600"}`,children:[Math.round(((p=a.completion_data)==null?void 0:p.completion_rate)||0),"%"]})]})]})]}),e.jsxs("div",{className:`p-4 rounded-xl ${l.theme==="dark"?"bg-slate-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${l.theme==="dark"?"bg-red-900":"bg-red-100"}`,children:e.jsx(ue,{className:`h-5 w-5 ${l.theme==="dark"?"text-red-400":"text-red-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"การประเมินที่ต้องทำ"}),e.jsx("p",{className:`text-sm ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"รายการการประเมินที่บุคคลนี้ต้องทำในฐานะผู้ประเมิน"})]})]}),e.jsx("div",{className:"mb-4 text-center",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full ${(((_=a.completion_data)==null?void 0:_.remaining_evaluations)||0)>0?l.theme==="dark"?"bg-red-900 text-red-400":"bg-red-100 text-red-700":l.theme==="dark"?"bg-green-900 text-green-400":"bg-green-100 text-green-700"}`,children:[e.jsx("span",{className:"text-2xl font-bold",children:((f=a.remaining_evaluations_detail)==null?void 0:f.filter(s=>!s.is_completed).length)||0}),e.jsx("span",{className:"text-sm font-medium",children:(((S=a.remaining_evaluations_detail)==null?void 0:S.filter(s=>!s.is_completed).length)||0)===0?"เสร็จแล้ว":"ยังไม่เสร็จ"})]})}),a.remaining_evaluations_detail&&a.remaining_evaluations_detail.length>0&&e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:a.remaining_evaluations_detail.map((s,m)=>e.jsxs("div",{className:`p-3 rounded-lg border ${s.is_completed?l.theme==="dark"?"bg-green-900/20 border-green-700":"bg-green-50 border-green-200":l.theme==="dark"?"bg-slate-600 border-slate-500":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:`font-medium ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:s.evaluatee_name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s.angle==="self"?"bg-gray-500 text-white":s.angle==="top"?"bg-blue-500 text-white":s.angle==="bottom"?"bg-green-500 text-white":s.angle==="left"?"bg-yellow-500 text-white":"bg-purple-500 text-white"}`,children:s.angle==="self"?"ตนเอง":s.angle==="top"?"บน":s.angle==="bottom"?"ล่าง":s.angle==="left"?"ซ้าย":"ขวา"})]}),e.jsxs("p",{className:`text-sm ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:[s.position," • ",s.division]}),e.jsxs("p",{className:`text-xs mt-1 ${l.theme==="dark","text-gray-500"}`,children:["รหัส: ",s.evaluatee_emid]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${s.is_completed?l.theme==="dark"?"text-green-400":"text-green-600":l.theme==="dark"?"text-orange-400":"text-orange-600"}`,children:[s.completion_percentage,"%"]}),e.jsxs("div",{className:`text-xs ${l.theme==="dark"?"text-gray-400":"text-gray-500"}`,children:[s.answered_questions,"/",s.total_questions," ข้อ"]})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:`w-full rounded-full h-2 ${l.theme==="dark"?"bg-slate-700":"bg-gray-200"}`,children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${s.is_completed?"bg-green-500":s.completion_percentage>0?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.max(s.completion_percentage,2)}%`}})}),e.jsxs("div",{className:`text-xs mt-1 ${l.theme==="dark"?"text-gray-400":"text-gray-500"}`,children:["ความคืบหน้าในการประเมิน: ",s.completion_percentage,"%"]})]})]},m))}),(!a.remaining_evaluations_detail||a.remaining_evaluations_detail.length===0)&&e.jsx("div",{className:`text-center py-4 ${l.theme==="dark"?"text-gray-400":"text-gray-500"}`,children:"ไม่มีการประเมินที่ต้องทำ"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${l.theme==="dark"?"bg-slate-700/50":"bg-gray-50"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"คะแนนการประเมิน"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Object.entries({self:"ประเมินตนเอง",top:"ผู้บังคับบัญชา",bottom:"ผู้ใต้บังคับบัญชา",left:"เพื่อนร่วมงาน (ซ้าย)",right:"เพื่อนร่วมงาน (ขวา)"}).map(([s,m])=>{var y,u;return e.jsxs("div",{className:`p-3 rounded-lg ${l.theme==="dark"?"bg-slate-600":"bg-white"}`,children:[e.jsx("p",{className:`text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:m}),e.jsx("p",{className:`text-xl font-bold ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:((u=(y=a.scores)==null?void 0:y[s])==null?void 0:u.toFixed(2))||"N/A"})]},s)}),e.jsxs("div",{className:`p-3 rounded-lg border-2 ${l.theme==="dark"?"bg-slate-600 border-purple-500":"bg-purple-50 border-purple-200"}`,children:[e.jsx("p",{className:`text-sm font-medium ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:"คะแนนเฉลี่ย"}),e.jsx("p",{className:`text-xl font-bold ${l.theme==="dark"?"text-purple-400":"text-purple-600"}`,children:((A=(w=a.scores)==null?void 0:w.average)==null?void 0:A.toFixed(2))||"N/A"})]})]})]}),a.evaluators&&a.evaluators.length>0&&e.jsxs("div",{className:`p-4 rounded-xl ${l.theme==="dark"?"bg-slate-700/50":"bg-gray-50"}`,children:[e.jsx("h3",{className:`text-lg font-semibold mb-4 ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:"รายชื่อผู้ประเมิน"}),e.jsx("div",{className:"space-y-3",children:a.evaluators.map((s,m)=>{var y;return e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${l.theme==="dark"?"bg-slate-600":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${s.completed?l.theme==="dark"?"bg-green-900 text-green-400":"bg-green-100 text-green-700":l.theme==="dark"?"bg-orange-900 text-orange-400":"bg-orange-100 text-orange-700"}`,children:s.completed?"✓":"!"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${l.theme==="dark"?"text-gray-300":"text-gray-900"}`,children:s.name}),e.jsxs("p",{className:`text-sm ${l.theme==="dark"?"text-gray-400":"text-gray-600"}`,children:["มุม: ",s.angle==="self"?"ประเมินตนเอง":s.angle==="top"?"ผู้บังคับบัญชา":s.angle==="bottom"?"ผู้ใต้บังคับบัญชา":s.angle==="left"?"เพื่อนร่วมงาน (ซ้าย)":"เพื่อนร่วมงาน (ขวา)"]})]})]}),e.jsx("div",{className:"text-right",children:s.completed?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:`font-bold ${l.theme==="dark"?"text-green-400":"text-green-600"}`,children:((y=s.score)==null?void 0:y.toFixed(2))||"N/A"}),e.jsx("p",{className:`text-xs ${l.theme==="dark"?"text-gray-400":"text-gray-500"}`,children:s.submittedAt?new Date(s.submittedAt).toLocaleDateString("th-TH"):""})]}):e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${l.theme==="dark"?"bg-orange-900 text-orange-400":"bg-orange-100 text-orange-700"}`,children:"ยังไม่ประเมิน"})})]},m)})})]})]}):e.jsx("div",{className:`text-center py-12 ${l.theme==="dark"?"text-gray-400":"text-gray-500"}`,children:"ไม่พบข้อมูลผู้ถูกประเมิน"})]})})})};export{Ft as default};
