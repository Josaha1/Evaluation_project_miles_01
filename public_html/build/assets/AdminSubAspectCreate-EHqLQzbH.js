import{K as g,m as v,r as y,j as e}from"./app-DM3CWPwz.js";import{t as o,M as j}from"./MainLayout-yPW0h5_m.js";import{B as N}from"./breadcrumb-BKTxKc6Q.js";import"./utils-ONoQxm8A.js";import"./x--rbPaS5b.js";function E(){const{evaluation:a,part:l,aspect:d,flash:i}=g().props,{data:r,setData:c,post:b,processing:u}=v({subaspects:[{name:""}]}),m=()=>{c("subaspects",[...r.subaspects,{name:"",description:""}])},x=t=>{r.subaspects.length>1&&c("subaspects",r.subaspects.filter((s,n)=>n!==t))},h=(t,s,n)=>{const p=[...r.subaspects];p[t][s]=n,c("subaspects",p)},f=t=>{t.preventDefault(),b(route("subaspects.store",{evaluation:a.id,part:l.id,aspect:d.id}),{onSuccess:()=>o.success("เพิ่มด้านย่อยสำเร็จ ✅"),onError:()=>o.error("เกิดข้อผิดพลาดในการเพิ่มด้านย่อย ❌")})};return y.useEffect(()=>{i.success&&o.success(i.success),i.error&&o.error(i.error)},[i]),e.jsx(j,{title:"เพิ่มด้านย่อย (Sub-Aspect)",breadcrumb:e.jsx(N,{items:[{label:"แดชบอร์ดผู้ดูแลระบบ",href:route("admindashboard")},{label:"รายการแบบประเมิน",href:route("evaluations.index")},{label:a.title,href:route("evaluations.edit",{evaluation:a.id})},{label:"ส่วน",href:route("parts.index",{evaluation:a.id})},{label:l.title,href:route("aspects.index",{evaluation:a.id,part:l.id})},{label:d.name,href:route("subaspects.index",{evaluation:a.id,part:l.id,aspect:d.id})},{label:"เพิ่มด้านย่อย",active:!0}]}),children:e.jsx("div",{className:"max-w-3xl mx-auto py-10",children:e.jsxs("form",{onSubmit:f,className:"space-y-6 bg-white dark:bg-gray-800 p-6 rounded shadow",children:[r.subaspects.map((t,s)=>e.jsxs("div",{className:"border p-4 rounded bg-gray-50 dark:bg-gray-700 space-y-4 relative",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"font-semibold text-gray-700 dark:text-white",children:["ด้านย่อยที่ ",s+1]}),r.subaspects.length>1&&e.jsx("button",{type:"button",className:"text-red-600 text-sm",onClick:()=>x(s),children:"ลบ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"ชื่อด้านย่อย"}),e.jsx("input",{type:"text",className:"w-full border p-2 rounded dark:bg-gray-800 dark:text-white",value:t.name,onChange:n=>h(s,"name",n.target.value),required:!0})]})]},s)),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{type:"button",onClick:m,className:"text-blue-600 hover:text-blue-800 text-sm",children:"➕ เพิ่มด้านย่อยใหม่"}),e.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 disabled:opacity-50",disabled:u,children:u?"กำลังบันทึก...":"บันทึกด้านย่อย"})]})]})})})}export{E as default};
