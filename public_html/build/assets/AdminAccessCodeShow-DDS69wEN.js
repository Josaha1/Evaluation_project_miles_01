import{K as l,r as b,j as e,S as k}from"./app-CvBoKgfj.js";import{t as c,M as v}from"./MainLayout-DXHIoJI3.js";import{B as w}from"./breadcrumb-BC5CAiAz.js";import{C as x}from"./card-CwtR2BCI.js";import{A as _}from"./arrow-left-D5ImZNQI.js";import{c as C}from"./createLucideIcon-DRc0qRU9.js";import{P as S}from"./printer-D3dp_a6R.js";import{B as A}from"./ban-BEJ8Uz_0.js";import"./utils-ONoQxm8A.js";import"./x-CCAKE15G.js";/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],m=C("copy",D);function $(){var i,n;const{accessCode:t,qrCodeSvg:h,qrCodeUrl:g}=l().props,{flash:a}=l().props;b.useEffect(()=>{a!=null&&a.success&&c.success(a.success),a!=null&&a.error&&c.error(a.error)},[a]);const y=()=>{navigator.clipboard.writeText(t.code),c.success("คัดลอก Access Code แล้ว")},p=()=>{navigator.clipboard.writeText(g),c.success("คัดลอก URL แล้ว")},u=()=>{const s=document.createElement("form");s.method="POST",s.action=route("admin.access-codes.print-cards");const o=document.querySelector('meta[name="csrf-token"]');if(o){const d=document.createElement("input");d.type="hidden",d.name="_token",d.value=o.getAttribute("content")||"",s.appendChild(d)}const r=document.createElement("input");r.type="hidden",r.name="code_ids[]",r.value=String(t.id),s.appendChild(r),document.body.appendChild(s),s.submit(),document.body.removeChild(s)},j=()=>{confirm("คุณแน่ใจหรือไม่ว่าต้องการยกเลิก Access Code นี้?")&&k.put(route("admin.access-codes.revoke",{accessCode:t.id}))},f=()=>{var s;return t.is_used&&((s=t.session)!=null&&s.completed_at)?"ประเมินเสร็จสิ้น":t.is_used?"ถูกยกเลิก":t.expires_at&&new Date(t.expires_at)<new Date?"หมดอายุ":"พร้อมใช้งาน"},N=()=>{var s;return t.is_used&&((s=t.session)!=null&&s.completed_at)?"text-green-600":t.is_used?"text-gray-600":t.expires_at&&new Date(t.expires_at)<new Date?"text-red-600":"text-blue-600"};return e.jsx(v,{title:`Access Code: ${t.code}`,breadcrumb:e.jsx(w,{items:[{label:"แดชบอร์ดผู้ดูแลระบบ",href:route("admindashboard")},{label:"จัดการ Access Codes",href:route("admin.access-codes.index")},{label:t.code,active:!0}]}),children:e.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-10",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("a",{href:route("admin.access-codes.index"),className:"inline-flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:[e.jsx(_,{className:"w-4 h-4"}),"กลับ"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(x,{className:"p-6 text-center",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"QR Code"}),e.jsx("div",{className:"mx-auto mb-4 flex justify-center",dangerouslySetInnerHTML:{__html:h}}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"font-mono text-2xl font-bold text-indigo-600 tracking-widest",children:t.code})}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs("button",{onClick:y,className:"inline-flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:[e.jsx(m,{className:"w-4 h-4"}),"คัดลอก Code"]}),e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-1 px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:[e.jsx(m,{className:"w-4 h-4"}),"คัดลอก URL"]})]})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"รายละเอียด"}),e.jsxs("dl",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"สถานะ"}),e.jsx("dd",{className:`font-semibold ${N()}`,children:f()})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"องค์กร"}),e.jsx("dd",{className:"text-gray-800 dark:text-white",children:((i=t.organization)==null?void 0:i.name)||"-"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"ผู้ถูกประเมิน"}),e.jsx("dd",{className:"text-gray-800 dark:text-white",children:t.evaluatee?`${t.evaluatee.fname} ${t.evaluatee.lname}`:"-"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"แบบประเมิน"}),e.jsx("dd",{className:"text-gray-800 dark:text-white",children:((n=t.evaluation)==null?void 0:n.title)||"-"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"ปีงบประมาณ"}),e.jsx("dd",{className:"text-gray-800 dark:text-white",children:t.fiscal_year})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"วันหมดอายุ"}),e.jsx("dd",{className:"text-gray-800 dark:text-white",children:t.expires_at?new Date(t.expires_at).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"}):"ไม่มีวันหมดอายุ"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"วันที่สร้าง"}),e.jsx("dd",{className:"text-gray-800 dark:text-white",children:new Date(t.created_at).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})]}),t.session&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"เริ่มทำ"}),e.jsx("dd",{className:"text-gray-800 dark:text-white",children:t.session.started_at?new Date(t.session.started_at).toLocaleString("th-TH"):"-"})]}),t.session.completed_at&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"ส่งเสร็จ"}),e.jsx("dd",{className:"text-gray-800 dark:text-white",children:new Date(t.session.completed_at).toLocaleString("th-TH")})]}),t.session.ip_address&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"IP Address"}),e.jsx("dd",{className:"text-gray-800 dark:text-white font-mono text-xs",children:t.session.ip_address})]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t dark:border-gray-700 flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-1 px-4 py-2 bg-indigo-600 text-white rounded text-sm hover:bg-indigo-700",children:[e.jsx(S,{className:"w-4 h-4"}),"พิมพ์ QR Card"]}),!t.is_used&&e.jsxs("button",{onClick:j,className:"inline-flex items-center gap-1 px-4 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:[e.jsx(A,{className:"w-4 h-4"}),"ยกเลิก Code"]})]})]})]})]})})}export{$ as default};
